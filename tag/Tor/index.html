<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  <title>Tag: Tor | Blog of Secer</title>
  <meta name="description" content="" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" type="text/css" href="/css/screen.css" />
  <link rel="stylesheet" type="text/css" href="/css/style.css" />
  <meta name="generator" content="Blog of Secer">

  
  
  

  
</head>

<!--
<body class="home-template">
-->
<body class="home-template">
<div id="perspective" class="perspective effect-movedown">
  <div class="container">
    <!-- wrapper -->
    <div class="wrapper">

      <header class="site-head"  style="background: #24282b url(/img/img-bg.jpg) 0 -20%" >
    <div class="vertical">
        <div class="site-head-content inner">
             <a class="blog-logo" href="/"><img src="/img/logo.svg" alt="Blog Logo"/></a> 
            <h1 class="blog-title">Blog of Secer</h1>
            <h2 class="blog-description"><button id="showMenu">Show Menu</button></h2>
        </div>
    </div>
</header>

      
<main class="content" role="main">
  
  <article class="post">
    <header class="post-header">
      <span class="post-meta">
      <time datetime="2016-04-20T18:02:09.000Z" itemprop="datePublished">
          2016-04-21
      </time>
    
    
    | 
    <a href='/tag/Tor/'>Tor</a>,
    
    <a href='/tag/Hacking-Team/'>Hacking Team</a>
    
    
</span>
      <h2 class="post-title"><a href="/1137.seo/">渗透Hacking Team过程</a></h2>
    </header>
    <section class="post-excerpt">
      <p>
      
        <p>0x00 Hacking Team</p>  <p><a href="http://ha.cker.in/tag/Hacking Team" target="_blank">Hacking Team</a> 是一个协助政府hack和监视记者、政治家等的公司（详见段尾链接），当然有时候也会监控恐怖分子和罪犯。其CEO——Vincenzetti——很喜欢在他的邮件末尾加上一句纳粹标语“boia chi molla” (放弃者该死)，同时，他一直宣称拥有可以解决“Tor 问题”和“暗网问题”的技术。但是我一直很怀疑他的那种技术的有效性。</p>  <h3>0x01 小心点</h3>  <p>很不幸，我们的世界是颠倒的，你越做坏事越富有，越做好事反而被抓。但幸运的是，多亏了人们的努力，比如&quot;Tor项目&quot;，你可以通过以下指导来防止被人抓住把柄：</p>  <p>1) 加密的你的硬盘</p>  <p>如果有一天你做的事被发现了，警察叔叔带走了你的电脑，尽管被发现就意味着你已经犯了很多错误，但是加密硬盘会比不加密要好得多。</p>  <p>2) 使用虚拟机并且把所有的网络都走Tor</p>  <p>这样就实现了两点，第一、你的所有流量都匿名了。第二、把你的个人生活和匿名操作分开了，防止两种生活互相混合。</p>  <p>3) 不要直接连接<a href="http://ha.cker.in/tag/Tor" target="_blank">Tor</a>网络 (可选项)</p>  <p>Tor不是万能药，有可能你在连接到Tor网络的时候刚好在做坏事。也可能你在退出Tor网络的时候你同样在做坏事。最好还是用别人的wifi，或者连接vpn或者中转机子，然后连接Tor匿名网络。</p>  <h3>0x02 搜集信息</h3>  <p>尽管这个过程非常无聊，但却是非常重要，目标越大越多，漏洞出现的几率就越大。</p>  <h6>1 技术方面的信息</h6>  <p>主要使用以下各种方面的信息</p>  <p>1)Google</p>  <p>如果使用合适的语句，你可以发现大量的意外收获。</p>  <p>2)二级域名搜集</p>  <p>一般来说，域名大部分都是又第三方公司提供的，你需要寻找到其域名的IP范围。当然，有时候会存在DNS域传送漏洞，这样就更好搜集信息了。</p>  <p>3)Whois查询和反向查询</p>  <p>通过各种Whois查询和其ip范围的域名反向查询，你也可以获得很多其他子域名，据我所知，没有免费的反向查询，除非谷歌hack。</p>  <p>4)端口扫描和指纹提取</p>  <p>和其他的技术不同，你可以跟公司的员工聊天。我把它作为可选项放在这里因为它不是一种攻击方式，只是搜集信息的一种方式。在扫描的过程中，该业务的入侵检测系统可能会告警，但是不用担心，整个Inernet都经常会扫描自身。</p>  <p>对于扫描来说，<a href="http://ha.cker.in/tag/nmap" target="_blank">Nmap</a>是再合适不过了，它也可以识别各种服务的指纹。但是对于大规模网络来说，zmap和masscan更快速。WhatWeb和BlindElephant 适合抓取web指纹。</p>  <h6>2 社工信息</h6>  <p>对于社会工程学来说，搜集员工信息非常重要，包括他们的各自的角色，合约，使用的操作系统，浏览器，插件，软件等。一般使用如下途径：</p>  <p>1)Google</p>  <p>这也是最有用的工具。</p>  <p>2)theHarvester y recon-ng</p>  <p>我在上一个内容中就提到了这些东西，但是他们其实还有更多的用处。你可以自动快速地找到大量的信息，这也值得你去花时间阅读官方文档。</p>  <p>3)LinkedIn</p>  <p>你可以通过这个软件获取到大量的雇员信息，内部人员总是倾向于与他人交流。</p>  <p>4)Data.com</p>  <p>它就像拼图一样把各种信息整合在一起。</p>  <p>5)File metadata</p>  <p>你可以在他们公司发布的各种文档中找到大量有用的信息。</p>  <h3>0x03 打入内网</h3>  <p>进入内网的方式有很多种。我打入HT内网的方式是不常见的，而且比平时花的精力要多得多，所以我在这里提一下进入内网的两种常见的方式，这两种也是我推荐的。</p>  <h6>1 社工</h6>  <p>社会工程学，尤其是鱼叉式网络钓鱼，是各种渗透技巧中比较可靠的一种。更多技巧请移步段尾链接。我不想尝试对HT进行钓鱼攻击，因为这种攻击方式对他们来说太常见了，所以他们会非常警惕。既增加了难度，又容易被发现我的意图。 </p>  <p><a href="http://www.hacknbytes.com/2016/01/apt-pentest-con-empire.html">http://www.hacknbytes.com/2016/01/apt-pentest-con-empire.html</a></p>  <p><a href="http://blog.cobaltstrike.com/2015/09/30/advanced-threat-tactics-course-and-notes/">http://blog.cobaltstrike.com/2015/09/30/advanced-threat-tactics-course-and-notes/</a></p>  <p><a href="http://www.netcomunity.com/lestertheteacher/doc/ingsocial1.pdf">http://www.netcomunity.com/lestertheteacher/doc/ingsocial1.pdf</a></p>  <h6>2 购买权限</h6>  <p>多亏了勤劳的俄罗斯人和他们的渗透工具 “traffic sellers”和“bot herders”，许多公司都已经有了被入侵的电脑。几乎所有世界五百强的大型网络中都存在一些被入侵的机器。但是Hacking Team是个小公司，他们的大多数员工都是信息安全专家，所以他们内部存在被入侵机器的可能性非常小。</p>  <h5>3 技术入侵</h5>  <p>Gamma公司被黑以后，我就已经描述了一个寻找漏洞的过程：</p>  <pre><a href="http://pastebin.com/raw.php?i=cRYvK4jb">http://pastebin.com/raw.php?i=cRYvK4jb</a></pre><br><br><p>Hacking Team有一个段的公网IP:</p>

<pre>inetnum:&#160;&#160;&#160;&#160;&#160;&#160;&#160; 93.62.139.32 - 93.62.139.47</pre>

<pre>descr:&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; HT public subnet</pre>

<p>他们的网络有少量暴露在外网，比如不像Gamma公司，他们的公网地址都需要证书才能连接。HT的公网服务器主要有一个Joomla的博客(joomscan没有扫出来有用的东西)，一个邮件服务器，几个路由，两个VPN，一个垃圾邮箱过滤系统。所以我现在只能通过以下方式获取权限：发现一个Joomla的0day，或者postfix的0day，或者他们其他一个系统的0day。嵌入式系统的0day对于我来说比较靠谱点，于是我花了两周的时间，通过逆向发现了一个命令执行0day。这个0day至今仍然没有修复，所以我也不方便给出更多细节。</p>

<h3>0x04 事前准备</h3>

<p>在正式攻击之前，我做了很多测试和准备，在硬件里面写入了一个后门，并且在嵌入式系统上编译了各种各样的工具：</p>

<p>1) busybox</p>

<p>这个工具大多数的Unix系机器都没有。</p>

<p>2)nmap</p>

<p>扫描工具</p>

<p>3)Responder.py</p>

<p>内网中间人攻击神器</p>

<p>4)python</p>

<p>这个必须得有</p>

<p>5)tcpdump</p>

<p>抓包</p>

<p>6)dsniff</p>

<p>在内网中嗅探各种密码之类的，我更喜欢用HT的ettercap，但是编译起来很麻烦。</p>

<p>7)socat</p>

<p>NC的升级版，主要端口转发</p>

<p>8)screen</p>

<p>可以让你多窗口执行命令，其实也不是太需要</p>

<p>9)socks5代理主机</p>

<p>加上proxychains，插入内网</p>

<p>10)tgcd</p>

<p>通过转发端口，穿透防火墙</p>

<p>最坑的事儿就是你把后门和工具部署上去之后，系统挂了，然后运维上去一看，全完了。所以我花了一周的时间在最后的部署之前测试我的各种后门和exp。</p><br>
      
      </p>
      
      <p>
          <a href="/1137.seo/" class="excerpt-link">Read More...</a>
      </p>
      
    </section>
  </article>
  
  <article class="post">
    <header class="post-header">
      <span class="post-meta">
      <time datetime="2014-08-30T03:39:42.000Z" itemprop="datePublished">
          2014-08-30
      </time>
    
    
    | 
    <a href='/tag/SQLmap/'>SQLmap</a>,
    
    <a href='/tag/Tor/'>Tor</a>,
    
    <a href='/tag/wpscan/'>wpscan</a>,
    
    <a href='/tag/joomscan/'>joomscan</a>,
    
    <a href='/tag/WhatWeb/'>WhatWeb</a>
    
    
</span>
      <h2 class="post-title"><a href="/1093.seo/">我是如何黑掉英国间谍软件公司Gamma的</a></h2>
    </header>
    <section class="post-excerpt">
      <p>
      
        <p>本文翻译自黑客自己公布的入侵指南。详细的介绍了从信息收集，到发现目标站点，以及进行源码审计，绕过waf注入，尝试提权服务器的整个过程。</p>  <p><b>0</b><b>×00 开篇</b></p>  <p>我写这篇文章不是为了吹嘘自己有多牛逼，使用了多高深的技术去搞定Gamma。我只是想揭开黑客技术神秘的面纱，告诉人们黑客技术很普通，你也可以利用黑客技术去反抗这个世界上那些见不得人的事。如果你没有任何编程或者hacking的经验，那些下面的文章可能会看起来像天书一样。没有关系，文章最后的参考资料会帮助你慢慢开始。相信我，一旦你有了一些基础之后就会发现hacking这事比信息自由法案的申请简单多了。（filing a FOIA request)。</p>  <p><b>0</b><b>×01保护自己</b></p>  <p>入侵是非法的，所以需要一些基本的措施来保护自己。</p>  <p>1,使用Truecrypt 7.1a制作一个隐藏的加密分区</p>  <p>2,在这个加密分区上安装Whonix系统</p>  <p>3,(可选的)尽管使用Whonix系统，所有的流量都会经过<a href="http://ha.cker.in/tag/Tor" target="_blank">Tor</a>，已经很足够了。但是最好还是不要用自己名字或者地址申请的网络接入点。使用cantenna，aircrack和reaver可以方便的破解无线，接入网络。</p>  <p>只要你遵守一些常识，比如永远不要在Whonix系统之后做hacking相关的事，也不要在Whonix系统中做一些自己日常使用的操作，跟其他黑客聊天的时候不要透漏自己真实生活的信息，也不要跟身边的朋友吹嘘自己非法入侵的经历。那么你就可以基本不用担心被追踪的问题了。</p>  <p>注意：我并不推荐直接通过Tor进行hacking。对于浏览器来说使用Tor是很方便的。但是对于nmap，sqlmap，nikto之类的黑客工具，需要发送成千上万的请求，通过Tor使用就会非常慢。更不用说有时候你需要一个公网IP来接受反弹shell了。我推荐使用黑来的服务器或者使用比特比购买的VPS来进行hacking。然后你跟服务器或者VPS的连接使用Tor。这样就只有很少的命令行的流量通过Tor。速度会快很多。</p>  <p><b>0</b><b>×02 收集目标信息</b></p>  <p>一般我会不断使用fierce，whois和反向whois查询来找到一个组织所有相关的域名和ip。拿Blackwater为例。我们知道他的主页是academi.com。使用fierce.py -dns academi.com查询它的子域名：</p>  <p>67.238.84.228&#160;&#160; email.academi.com </p>  <p>67.238.84.242&#160;&#160; extranet.academi.com </p>  <p>67.238.84.240&#160;&#160; mail.academi.com </p>  <p>67.238.84.230&#160;&#160; secure.academi.com </p>  <p>67.238.84.227&#160;&#160; vault.academi.com </p>  <p>54.243.51.249&#160;&#160; www.academi.com</p>  <p>然后通过whois查询找到www.academi.com托管在亚马逊云上。其他域名的ip也在下面的段内。</p>  <p>NetRange:&#160;&#160;&#160;&#160;&#160;&#160; 67.238.84.224 - 67.238.84.255 </p>  <p>CIDR:&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 67.238.84.224/27 </p>  <p>CustName:&#160;&#160;&#160;&#160;&#160;&#160; Blackwater USA </p>  <p>Address:&#160;&#160;&#160;&#160;&#160;&#160;&#160; 850 Puddin Ridge Rd</p><br>
      
      </p>
      
      <p>
          <a href="/1093.seo/" class="excerpt-link">Read More...</a>
      </p>
      
    </section>
  </article>
  
  <nav class="pagination" role="pagination">
    
    <span class="page-number">Page 1 of 1</span>
    
  </nav>
</main>


      
<footer class="site-footer">
  
  <div class="inner">
     <section class="copyright">All content copyright <a href="/">Blog of Secer</a> &copy; 2014 &bull; All rights reserved.</section>
     <section class="poweredby">Proudly published with <a class="icon-ghost" href="http://zespia.tw/hexo/">Hexo</a></section>
  </div>
</footer>

      <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

<script type="text/javascript" src="/js/jquery.fitvids.js"></script>
<script type="text/javascript" src="/js/index.js"></script>
<script type="text/javascript" src="/js/menu.js"></script>





  </div>
</div>

<nav  class="outer-nav top horizontal">

          <a class="icon-home"  href="/"><span>Home</span></a>

          <a class="icon-news"  href="/archive"><span>Archive</span></a>

          <a class="icon-image"  href="/images"><span>Images</span></a>

          <a class="icon-wiki"  href="/wiki/2014-10-28-wiki/"><span>Wiki</span></a>

          <a class="icon-Favorites"  href="/favorites"><span>Favorites</span></a>

          <a class="icon-mail"  href="/about/2014-09-11-mabao/"><span>Contact</span></a>

</nav>

</div>
</body>
</html>
