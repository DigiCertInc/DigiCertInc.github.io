<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  <title>Tag: Nginx | Blog of Secer</title>
  <meta name="description" content="" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" type="text/css" href="/css/screen.css" />
  <link rel="stylesheet" type="text/css" href="/css/style.css" />
  <meta name="generator" content="Blog of Secer">

  
  
  

  
</head>

<!--
<body class="home-template">
-->
<body class="home-template">
<div id="perspective" class="perspective effect-movedown">
  <div class="container">
    <!-- wrapper -->
    <div class="wrapper">

      <header class="site-head"  style="background: #24282b url(/img/img-bg.jpg) 0 -20%" >
    <div class="vertical">
        <div class="site-head-content inner">
             <a class="blog-logo" href="/"><img src="/img/logo.svg" alt="Blog Logo"/></a> 
            <h1 class="blog-title">Blog of Secer</h1>
            <h2 class="blog-description"><button id="showMenu">Show Menu</button></h2>
        </div>
    </div>
</header>

      
<main class="content" role="main">
  
  <article class="post">
    <header class="post-header">
      <span class="post-meta">
      <time datetime="2012-07-16T10:52:45.000Z" itemprop="datePublished">
          2012-07-16
      </time>
    
    
    | 
    <a href='/tag/Nginx/'>Nginx</a>,
    
    <a href='/tag/mongrel/'>mongrel</a>,
    
    <a href='/tag/Rails/'>Rails</a>
    
    
</span>
      <h2 class="post-title"><a href="/704.seo/">使用Nginx+mongrel部署Rails应用</a></h2>
    </header>
    <section class="post-excerpt">
      <p>
      
        <p><h4>安装<a href="http://ha.cker.in/tag/nginx" target="_blank">nginx</a></h4> <p>下载地址 <a href="http://nginx.org/en/download.html">http://nginx.org/en/download.html</a> <p>我下载的版本是 <a href="http://ha.cker.in/tag/nginx" target="_blank">nginx</a>-0.8.40.tar.gz <p>解压安装<pre>tar -zxvf nginx-0.8.40.tar.gz<br>cd nginx-0.8.40/<br>.configure<br>make<br>sudo make install<br></pre></p>
<p>默认情况下安装目录是 /usr/local/nginx<br><h4>安装<a href="http://ha.cker.in/tag/mongrel" target="_blank">mongrel</a>和mongrel_cluster</h4><pre>sudo gem install mongrel mongrel_cluster</pre><br><p>由于用gem安装后mongrel_rails命令被放在 /var/lib/gems/1.8/bin/mongrel_rails，使用不方便，所以建议建立符号链接<pre>sudo ln -s /var/lib/gems/1.8/bin/mongrel_rails /usr/bin/mongrel_rails</pre><br><h4>部署Rails应用</h4><br><p>我的应用示例是redmine，一个用Rails做的项目管理工具。redmine安装路径是 /opt/redmine<br><p><b>配置nginx，添加一个server块，用于服务redmine</b><br><p>编辑 vi /usr/local/nginx/conf/nginx.conf，以下是添加的内容<pre>upstream mongrel {<br>  server 127.0.0.1:8000;<br>  server 127.0.0.1:8001;<br>}<br><br># rails server<br>server {<br>  listen 80;<br>  server_name redmine.moon.ossxp.com;<br>  root /opt/redmine/public; #注意这里一定要指向Rails应用的public目录<br>  index index.html index.htm;<br><br>  location / {<br>    proxy_pass <a href="http://mongrel">http://mongrel</a>;<br>    proxy_redirect off;<br>    proxy_set_header Host $host;<br>    proxy_set_header X-Real-IP $remote_addr;<br>    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;<br>  }<br>}</pre>
      
      </p>
      
      <p>
          <a href="/704.seo/" class="excerpt-link">Read More...</a>
      </p>
      
    </section>
  </article>
  
  <article class="post">
    <header class="post-header">
      <span class="post-meta">
      <time datetime="2012-07-15T21:34:35.000Z" itemprop="datePublished">
          2012-07-16
      </time>
    
    
    | 
    <a href='/tag/Nginx/'>Nginx</a>
    
    
</span>
      <h2 class="post-title"><a href="/699.seo/">Nginx编译选项</a></h2>
    </header>
    <section class="post-excerpt">
      <p>
      
        <p><h3>编译选项</h3>  <p>configure 脚本确定系统所具有一些特性，特别是 nginx 用来处理连接的方法。然后，它创建 Makefile 文件。</p>  <p>configure 支持下面的选项：</p>  <p><b>–prefix=</b>&lt;path&gt; - Nginx安装路径。如果没有指定，默认为 /usr/local/nginx。</p>  <p><b>–sbin-path=</b>&lt;path&gt; - Nginx可执行文件安装路径。只能安装时指定，如果没有指定，默认为&lt;prefix&gt;/sbin/nginx。</p>  <p><b>–conf-path=</b>&lt;path&gt; - 在没有给定-c选项下默认的nginx.conf的路径。如果没有指定，默认为&lt;prefix&gt;/conf/nginx.conf。</p>  <p><b>–pid-path=</b>&lt;path&gt; - 在nginx.conf中没有指定pid指令的情况下，默认的nginx.pid的路径。如果没有指定，默认为 &lt;prefix&gt;/logs/nginx.pid。</p>  <p><b>–lock-path=</b>&lt;path&gt; - nginx.lock文件的路径。</p>  <p><b>–error-log-path=</b>&lt;path&gt; - 在nginx.conf中没有指定error_log指令的情况下，默认的错误日志的路径。如果没有指定，默认为 &lt;prefix&gt;/logs/error.log。</p>  <p><b>–http-log-path=</b>&lt;path&gt; - 在nginx.conf中没有指定access_log指令的情况下，默认的访问日志的路径。如果没有指定，默认为 &lt;prefix&gt;/logs/access.log。</p>  <p><b>–user=</b>&lt;user&gt; - 在nginx.conf中没有指定user指令的情况下，默认的nginx使用的用户。如果没有指定，默认为 nobody。</p>  <p><b>–group=</b>&lt;group&gt; - 在nginx.conf中没有指定user指令的情况下，默认的nginx使用的组。如果没有指定，默认为 nobody。</p>  <p><b>–builddir=DIR</b> - 指定编译的目录</p>  <p><b>–with-rtsig_module</b> - 启用 rtsig 模块</p>  <p><b>–with-select_module</b> <b>–without-select_module</b> - Whether or not to enable the select module. This module is enabled by default if a more suitable method such as kqueue, epoll, rtsig or /dev/poll is not discovered by configure.</p>  <p>//允许或不允许开启SELECT模式，如果 configure 没有找到更合适的模式，比如：kqueue(sun os),epoll (linux kenel 2.6+), rtsig(实时信号)或者/dev/poll(一种类似select的模式，底层实现与SELECT基本相 同，都是采用轮训方法) SELECT模式将是默认安装模式</p>  <p><b>–with-poll_module</b> <b>–without-poll_module</b> - Whether or not to enable the poll module. This module is enabled by default if a more suitable method such as kqueue, epoll, rtsig or /dev/poll is not discovered by configure.</p>  <p><b>–with-http_ssl_module</b> - Enable ngx_http_ssl_module. Enables SSL support and the ability to handle HTTPS requests. Requires OpenSSL. On Debian, this is libssl-dev.</p>  <p>//开启HTTP SSL模块，使NGINX可以支持HTTPS请求。这个模块需要已经安装了OPENSSL，在DEBIAN上是libssl-dev</p>
      
      </p>
      
      <p>
          <a href="/699.seo/" class="excerpt-link">Read More...</a>
      </p>
      
    </section>
  </article>
  
  <article class="post">
    <header class="post-header">
      <span class="post-meta">
      <time datetime="2012-06-12T09:55:42.000Z" itemprop="datePublished">
          2012-06-12
      </time>
    
    
    | 
    <a href='/tag/渗透/'>渗透</a>,
    
    <a href='/tag/反向代理/'>反向代理</a>,
    
    <a href='/tag/Nginx/'>Nginx</a>,
    
    <a href='/tag/web渗透测试/'>web渗透测试</a>,
    
    <a href='/tag/squid/'>squid</a>
    
    
</span>
      <h2 class="post-title"><a href="/493.seo/">反向代理在Web渗透测试中的运用</a></h2>
    </header>
    <section class="post-excerpt">
      <p>
      
        <p>反向代理在Web渗透测试中的运用 </p>  <p>作者：不走的钟 </p>  <p>来源：<a href="http://www.007hack.com/?p=770">http://www.007hack.com/?p=770</a></p>  <p> 在一次Web渗透测试中，目标是M国的一个Win+Apache+PHP+MYSQL的网站，独立服务器，对外仅开80端口，网站前端的业务系统比较简单，经过几天的测试也没有找到漏洞，甚至连XSS都没有发现，也未找到网站后台，在收集信息的时候已经排除了C段入侵的可行性（选择C段入侵的时候，需要对目标、网络、路由和国家区域进行分析和判断，如果不经思考和判断地去入侵C段服务器，当你费尽心思拿到某台服务器权限时，往往发现毫无半点用处，特别又是在国外，ARP基本上都没什么希望，当然内网渗透中又是另一回事。） </p>  <p> 也许在渗透测试遇到这种情况时大多会选择放弃，在绝望的时候，我将目标临时转移到该网站域名注册商，因为拥有域名注册商网站权限，至少可以修改目标网站的域名解析。一般情况入侵域名注册网站难度比较大，但并不是没有希望，在09年的时候，国内很多域名注册商的网站都存在漏洞。渗透那个域名注册商网站，过程比较繁杂，也没有新的技术点，靠的就是细心和耐心，但最终还是获取到目标网站域名的管理账号和密码，那么此时我们已知和已有的条件如下: </p>  <p> 目标域名：www.007hack.com(当然不是真的，文章来源007安全)   <br /> 网站IP:1.1.1.1 </p>  <p> 环境：Win+Apache+PHP+MYSQL </p>  <p> 已有权限：域名解析权限，可以将www.007hack.com解析到任何一个IP上 </p>  <p> 特别说明下，目标网站使用的服务器，并不是在域名注册商租用的，而是放置在公司机房中，所以通过域名注册商网站，是不能管理到Web源码的，只能进行域名解析。 </p>  <p> 当拥有域名解析权限后，如何才获取目标网站的权限呢？ </p>  <p> A：构造一个和目标非常相似的网站？然后将域名解析到构造的网站？ </p>  <p> B：使用iis重定向？ </p>  <p>这些方法都非常容易被发现，并且也无法获取到权限，所以遇到这种场景的时候我们可以使用反向代理，也是本文的重点。了解反向代理之前，我做一个关于HTTP 代理的简单介绍， 代理常用的是普通代理和反向代理： </p>  <p>普通代理：为用户（客户端）提供代理，需要在客户端设置，比如在客户端浏览器中设置代理服务器IP和端口，完成配置后，用户可以通过代理服务器访问互联网，代理服务器相当于中间人的作用。根据代理服务器配置不同，又可以将普通代理分为，几种不同安全级别的代理，代理软件比较多，不同的厂商有不同的称谓和分级，一般情况都包括以下三个级别，透明代理、普通匿名代理和高匿名代理。</p>
      
      </p>
      
      <p>
          <a href="/493.seo/" class="excerpt-link">Read More...</a>
      </p>
      
    </section>
  </article>
  
  <article class="post">
    <header class="post-header">
      <span class="post-meta">
      <time datetime="2012-04-10T12:50:29.000Z" itemprop="datePublished">
          2012-04-10
      </time>
    
    
    | 
    <a href='/tag/Mysql/'>Mysql</a>,
    
    <a href='/tag/CentOS/'>CentOS</a>,
    
    <a href='/tag/Nginx/'>Nginx</a>,
    
    <a href='/tag/php/'>php</a>,
    
    <a href='/tag/LNMP/'>LNMP</a>,
    
    <a href='/tag/Php-fpm/'>Php-fpm</a>,
    
    <a href='/tag/RedHat/'>RedHat</a>
    
    
</span>
      <h2 class="post-title"><a href="/369.seo/">CentOS 6.2   RedHat EL 5.4 yum安装配置lnmp服务器(Nginx+PHP+MySQL)</a></h2>
    </header>
    <section class="post-excerpt">
      <p>
      
        <p><p><a href="http://img.cker.in/CentOS6.2RedHatEL5.4yumlnmpNginxPHPMySQL_43ED/image.png"><img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="image" border="0" alt="image" src="http://img.cker.in/CentOS6.2RedHatEL5.4yumlnmpNginxPHPMySQL_43ED/image_thumb.png" width="244" height="159"></a> </p> <p><strong>准备篇：</strong> <p><strong>1</strong><strong>、配置防火墙，开启80端口、3306端口</strong><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong> vi /etc/sysconfig/iptables<br></strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -A INPUT -m state –state NEW -m tcp -p tcp –dport 80 -j ACCEPT（允许80端口通过防火墙）<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -A INPUT -m state –state NEW -m tcp -p tcp –dport 3306 -j ACCEPT（允许3306端口通过防火墙）<br><strong>特别提示：很多网友把这两条规则添加到防火墙配置的最后一行，导致防火墙启动失败，正确的应该是添加到默认的22端口这条规则的下面</strong><br>添加好之后防火墙规则如下所示：<br>#########################################################<br># Firewall configuration written by system-config-firewall<br># Manual customization of this file is not recommended.<br><em>filter<br>:INPUT ACCEPT [0:0]<br>:FORWARD ACCEPT [0:0]<br>:OUTPUT ACCEPT [0:0]<br>-A INPUT -m state –state ESTABLISHED,RELATED -j ACCEPT<br>-A INPUT -p icmp -j ACCEPT<br>-A INPUT -i lo -j ACCEPT<br>-A INPUT -m state –state NEW -m tcp -p tcp –dport 22 -j ACCEPT<br>-A INPUT -m state –state NEW -m tcp -p tcp –dport 80 -j ACCEPT<br>-A INPUT -m state –state NEW -m tcp -p tcp –dport 3306 -j ACCEPT<br>-A INPUT -j REJECT –reject-with icmp-host-prohibited<br>-A FORWARD -j REJECT –reject-with icmp-host-prohibited<br>COMMIT<br>######################################################### <p><strong>/etc/init.d/iptables restart</strong>&nbsp; #最后重启防火墙使配置生效</p>
      
      </p>
      
      <p>
          <a href="/369.seo/" class="excerpt-link">Read More...</a>
      </p>
      
    </section>
  </article>
  
  <article class="post">
    <header class="post-header">
      <span class="post-meta">
      <time datetime="2012-04-04T04:48:06.000Z" itemprop="datePublished">
          2012-04-04
      </time>
    
    
    | 
    <a href='/tag/Nginx/'>Nginx</a>,
    
    <a href='/tag/Nginx平滑升级Tengine/'>Nginx平滑升级Tengine</a>,
    
    <a href='/tag/LTM/'>LTM</a>,
    
    <a href='/tag/LNMP/'>LNMP</a>
    
    
</span>
      <h2 class="post-title"><a href="/341.seo/">军哥LNMP一键安装包Nginx平滑升级Tengine(LTMP)</a></h2>
    </header>
    <section class="post-excerpt">
      <p>
      
        <p>Tengine 1.2.0基于最新的Nginx稳定版1.0.10而修改。它是由淘宝核心系统部基于Nginx开发的Web服务器，它在Nginx的基础上，针对大访问量网站的需求添加了很多功能和特性。Tengine的性能和稳定性已经在大型的网站如淘宝网，淘宝商城等得到了很好的验证。而团队的最终目标是打造一个高效、稳定、安全、易用的 Web 平台。 <p>使用军哥的LNMP一键安装包，可平滑从LNMP升级为LTMP（Linux+Tengine+Mysql+PhpmyAdmin）。 <p>一、安装LNMP <p><b>按Lnmp.org/install.html</b><b>先安装好军哥的</b><b>LNMP</b><b>一键安装包。</b> <p>二、平滑升级 <p>1、获取Tengine并解压和编译</p><pre><p>wget -c http:<span style="color: #008000">//tengine.taobao.org/download/tengine.tar.gz #获取压缩包</span></p><p><span style="color: #008000"></span><br></p><p>tar zxvf tengine.tar.gz #解压</p><p><br></p><p>cd tengine/ #进入目录</p><p><br></p><p>./configure #执行安装脚本</p><p><br></p><p>make </p></pre><br><p>SSH执行以上命令。</p><br><p><a href="http://img.cker.in/cf7de857d31d_12160/image.png"><img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="image" border="0" alt="image" src="http://img.cker.in/cf7de857d31d_12160/image_thumb.png" width="244" height="84"></a> </p><br><p><a href="http://img.cker.in/cf7de857d31d_12160/image_3.png"><img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="image" border="0" alt="image" src="http://img.cker.in/cf7de857d31d_12160/image_thumb_3.png" width="244" height="188"></a> </p><br><p><a href="http://img.cker.in/cf7de857d31d_12160/image_4.png"><img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="image" border="0" alt="image" src="http://img.cker.in/cf7de857d31d_12160/image_thumb_4.png" width="244" height="153"></a> </p>
      
      </p>
      
      <p>
          <a href="/341.seo/" class="excerpt-link">Read More...</a>
      </p>
      
    </section>
  </article>
  
  <article class="post">
    <header class="post-header">
      <span class="post-meta">
      <time datetime="2012-03-18T01:02:58.000Z" itemprop="datePublished">
          2012-03-18
      </time>
    
    
    | 
    <a href='/tag/Nginx/'>Nginx</a>,
    
    <a href='/tag/FastCGI/'>FastCGI</a>,
    
    <a href='/tag/php/'>php</a>
    
    
</span>
      <h2 class="post-title"><a href="/289.seo/">实战Nginx与PHP（FastCGI）的安装、配置与优化</a></h2>
    </header>
    <section class="post-excerpt">
      <p>
      
        一、什么是 FastCGIFastCGI是一个可伸缩地、高速地在HTTP server和动态脚本语言间通信的接口。多数流行的HTTP server都支持FastCGI，包括Apache、Nginx和lighttpd等，同时，FastCGI也被许多脚本语言所支持，其中就有PHP。FastCGI是从CGI发展改进而来的。传统CGI接口方式的主要缺点是性能很差，因为每次HTTP服务器遇到动态程序时都需要重新启动脚本解析器来执行解析，然后结果被
      
      </p>
      
      <p>
          <a href="/289.seo/" class="excerpt-link">Read More...</a>
      </p>
      
    </section>
  </article>
  
  <nav class="pagination" role="pagination">
    
    <span class="page-number">Page 1 of 1</span>
    
  </nav>
</main>


      
<footer class="site-footer">
  
  <div class="inner">
     <section class="copyright">All content copyright <a href="/">Blog of Secer</a> &copy; 2014 &bull; All rights reserved.</section>
     <section class="poweredby">Proudly published with <a class="icon-ghost" href="http://zespia.tw/hexo/">Hexo</a></section>
  </div>
</footer>

      <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

<script type="text/javascript" src="/js/jquery.fitvids.js"></script>
<script type="text/javascript" src="/js/index.js"></script>
<script type="text/javascript" src="/js/menu.js"></script>





  </div>
</div>

<nav  class="outer-nav top horizontal">

          <a class="icon-home"  href="/"><span>Home</span></a>

          <a class="icon-news"  href="/archives"><span>Archive</span></a>

          <a class="icon-image"  href="/images"><span>Images</span></a>

          <a class="icon-wiki"  href="/wiki/"><span>Wiki</span></a>

          <a class="icon-Favorites"  href="/favorites"><span>Favorites</span></a>

          <a class="icon-mail"  href="/about/"><span>Contact</span></a>

</nav>

</div>
</body>
</html>
