<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  <title>Tag: Metasploit | Blog of Secer</title>
  <meta name="description" content="" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" type="text/css" href="/css/screen.css" />
  <link rel="stylesheet" type="text/css" href="/css/style.css" />
  <meta name="generator" content="Blog of Secer">

  
  
  

  
</head>

<!--
<body class="home-template">
-->
<body class="home-template">
<div id="perspective" class="perspective effect-movedown">
  <div class="container">
    <!-- wrapper -->
    <div class="wrapper">

      <header class="site-head"  style="background: #24282b url(/img/img-bg.jpg) 0 -20%" >
    <div class="vertical">
        <div class="site-head-content inner">
             <a class="blog-logo" href="/"><img src="/img/logo.svg" alt="Blog Logo"/></a> 
            <h1 class="blog-title">Blog of Secer</h1>
            <h2 class="blog-description"><button id="showMenu">Show Menu</button></h2>
        </div>
    </div>
</header>

      
<main class="content" role="main">
  
  <article class="post">
    <header class="post-header">
      <span class="post-meta">
      <time datetime="2014-01-31T04:55:55.000Z" itemprop="datePublished">
          2014-01-31
      </time>
    
    
    | 
    <a href='/tag/Metasploit/'>Metasploit</a>
    
    
</span>
      <h2 class="post-title"><a href="/1071.seo/">记一次内网渗透检测</a></h2>
    </header>
    <section class="post-excerpt">
      <p>
      
        <p>朋友扔过来的一个公司，域名是aaainc.com，什么信息也没有。Google搜了下，只有主域名上面有个网站，还是托管在其他地方的，用的是开源的cms，没什么漏洞。    <br /></p>  <h3>0x01 信息收集</h3>  <br />  <p>先看看这公司是不是有自己的对外办公网络吧，Nslookup看了下mx记录，发现是mx.aaainc.com,mx0.aaainc.com，也就是说这是他们自己的邮件服务器，而不是用的腾讯，微软或者谷歌之类的企业邮箱。看来有点希望，因为一般这种情况下邮件服务器所在的ip地址段就是目标公司真实的ip地址段。将mx.aaainc.com解析出来的ip地址拿去<a href="http://bgp.he.net/">http://bgp.he.net</a>上whois查询，果然得到了公司的IP地址段：     <br />&#160;&#160;&#160;&#160;&#160; network:Network-Name:aaa–Inc-12-34-56-78     <br />&#160;&#160;&#160;&#160;&#160; network:IP-Network:12.34.56.78/26     <br />有ip地址段就好办一点了，先看看具体的对外服务情况，用nmap扫描了下这个ip地址段，结果用有几个开放80、443端口，没有其他的信息。依次去访问那几个ip，得到一个email登陆口，是微软的outlook web access，两个cisco的vpn登陆口，还有一个是sharepoint的二级域名intranet，访问时会弹出来基础认证的密码框，提示信息里面有显示aaainc.ad，看来里面有个域，这里面肯定是公司的内网无疑了。     <br />没什么多的可用的信息，web也就一个主站，估计去爆二级域名也不会有什么新的web出现。无聊又去公司的主站上看了看，想找找看有没有新发现。看到了有雇员介绍的页面，有相关的员工介绍和email地址，于是收集下来，看看能不能社工到密码。     <br /></p>  <h3>0x02 爆破outlook</h3>  <br />  <p>拿这些邮箱去百度、谷歌都搜了下，排除大部分搜索不到信息的，最后剩几个，找到了网上常用的用户名。在本地搭好的库里面查询，找到了一些密码，有两个人设置的密码比较有规律，于是利用查到的信息组合了下做成一个字典，然后准备去email登陆口那里跑一下。    <br />爆破owa的话metasploit里面有一个owa_login模块，是专门用来进行outlook登陆爆破的，而且支持outlook2003 2007 和2010，目标的是2007。于是打开kali，开启metasploit准备爆破。     <br />这里插句话，kali的metasploit是开机启动的，但是postgresql不是开机启动的，这就导致运行msfconsole时会出现连不上数据库的情况。而postgresql又特别蛋疼，必须要在metasploit前启动才行，所以每次启动metasploit时都要先停掉metasploit，然后启动postgresql，再重新启动<a href="http://ha.cker.in/tag/metasploit" target="_blank">metasploit</a>才行。具体命令如下：</p>  <p>service metasploit stop</p>  <p>service postgresql start</p>  <p>service metasploit start</p>  <p>Metasploit里面search owa就可以找到owa_login这个模块，这个模块除了常用的参数外，还有个ACTION是不在show options里面的，可以用show actions查看    <br /><a href="http://img.cker.in/5584158a8b56_12460/clip_image0014.png" rel="lightbox"><img title="clip_image001[4]" style="border-top-width: 0px; display: inline; border-left-width: 0px; border-bottom-width: 0px; border-right-width: 0px" height="263" alt="clip_image001[4]" src="http://img.cker.in/5584158a8b56_12460/clip_image0014_thumb.png" width="598" border="0" /></a>     <br />Owa爆破的结果证明了我的人品还是不错的，我成功的拿到了一个账号密码，可以登录email，也应该可以登录vpn。 </p><br>
      
      </p>
      
      <p>
          <a href="/1071.seo/" class="excerpt-link">Read More...</a>
      </p>
      
    </section>
  </article>
  
  <article class="post">
    <header class="post-header">
      <span class="post-meta">
      <time datetime="2012-08-31T03:18:49.000Z" itemprop="datePublished">
          2012-08-31
      </time>
    
    
    | 
    <a href='/tag/Metasploit/'>Metasploit</a>,
    
    <a href='/tag/0day/'>0day</a>
    
    
</span>
      <h2 class="post-title"><a href="/794.seo/">Metasploit利用CVE-2012-4681 java 0day入侵Windows</a></h2>
    </header>
    <section class="post-excerpt">
      <p>
      
        <p><p>作者：Secer</p>  <p>博客：<a href="http://Ha.cker.in" target="_blank">http://Ha.cker.in</a></p>  <p>Q Q：278641414</p>  <p>新手教程，仅为交流和进步，大牛勿喷。</p>  <p>最近java爆<a href="http://ha.cker.in/tag/0day" target="_blank">0day</a>了，很多新手童鞋不知道怎么利用，下面把我自己的研究成果抛砖引玉给大家，见笑了。</p>  <p>0x01 肉鸡环境安装</p>  <p>Java的<a href="http://ha.cker.in/tag/0day" target="_blank">0day</a>，首先当然要在XP测试机里面安装Jre环境，Jre下载地址在这<a href="http://jdk7.java.net/download.html">http://jdk7.java.net/download.html</a>或者<a href="http://www.xdowns.com/soft/6/56/2011/Soft_75169.html">http://www.xdowns.com/soft/6/56/2011/Soft_75169.html</a></p>  <p>我下的是Java Runtime Environment (JRE) 7.0 Update 6 windows-i586.exe如图1：</p>  <p><a href="http://img.cker.in/MetasploitCVE20124681java0dayWindows_1070E/clip_image001.png" target="_blank"><img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="clip_image001" border="0" alt="clip_image001" src="http://img.cker.in/MetasploitCVE20124681java0dayWindows_1070E/clip_image001_thumb.png" width="576" height="51" /></a></p>  <p>图1</p>  <p>安装直接下一步即可，如图2：</p>  <p><a href="http://img.cker.in/MetasploitCVE20124681java0dayWindows_1070E/clip_image002.png" target="_blank"><img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="clip_image002" border="0" alt="clip_image002" src="http://img.cker.in/MetasploitCVE20124681java0dayWindows_1070E/clip_image002_thumb.png" width="531" height="420" /></a></p>  <p>图2</p>  <p>安装完成后运行java –version命令看是否可以显示版本，如果显示了即表示安装成功！同时下图看到XP测试机IP为192.168.1.107，如图3：</p>  <p><a href="http://img.cker.in/MetasploitCVE20124681java0dayWindows_1070E/clip_image004.jpg" target="_blank"><img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="clip_image004" border="0" alt="clip_image004" src="http://img.cker.in/MetasploitCVE20124681java0dayWindows_1070E/clip_image004_thumb.jpg" width="596" height="321" /></a></p>  <p>图3</p>  <p>同时运行Backtrack 5 虚拟机，Backtrack的IP为192.168.1.106，和测试机在同一局域网，运行<a href="http://ha.cker.in/tag/Metasploit" target="_blank">Metasploit</a>如图4：</p>  <p><a href="http://img.cker.in/MetasploitCVE20124681java0dayWindows_1070E/clip_image006.jpg" target="_blank"><img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="clip_image006" border="0" alt="clip_image006" src="http://img.cker.in/MetasploitCVE20124681java0dayWindows_1070E/clip_image006_thumb.jpg" width="596" height="373" /></a></p>  <p>图4</p>  <p>0x02 给<a href="http://ha.cker.in/tag/Metasploit" target="_blank">Metasploit</a>添加模块</p>  <p>我的bt5里的<a href="http://ha.cker.in/tag/Metasploit" target="_blank">Metasploit</a>没有更新，默认当然是没有Java <a href="http://ha.cker.in/tag/0day" target="_blank">0day</a>利用模块的，图5中可以看到684个Exploits：</p>  <p><a href="http://img.cker.in/MetasploitCVE20124681java0dayWindows_1070E/clip_image008.jpg" target="_blank"><img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="clip_image008" border="0" alt="clip_image008" src="http://img.cker.in/MetasploitCVE20124681java0dayWindows_1070E/clip_image008_thumb.jpg" width="596" height="216" /></a></p>  <p>图5</p>  <p>下面我们来给<a href="http://ha.cker.in/tag/Metasploit" target="_blank">Metasploit</a>添加利用java漏洞必要的模块，可以到<a href="http://dev.metasploit.com/redmine/projects/framework/repository/revisions/52ca1083c22de7022baf7dca8a1756909f803341">这里</a>下载查看相关模块，如图6：</p>  <p><a href="http://img.cker.in/MetasploitCVE20124681java0dayWindows_1070E/clip_image009.png" target="_blank"><img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="clip_image009" border="0" alt="clip_image009" src="http://img.cker.in/MetasploitCVE20124681java0dayWindows_1070E/clip_image009_thumb.png" width="256" height="340" /></a></p>  <p>图6</p>  <p>下载Exploit.class、Exploit.java、java_jre17_exec.rb三个文件分别放到/opt/framework3/msf3目录下如图6所示对应的目录中，添加好了之后运行reload_all重新加载各模块，看到Metasploit里多了一个Exploit现在是685如图8：</p>
      
      </p>
      
      <p>
          <a href="/794.seo/" class="excerpt-link">Read More...</a>
      </p>
      
    </section>
  </article>
  
  <article class="post">
    <header class="post-header">
      <span class="post-meta">
      <time datetime="2012-06-16T07:54:20.000Z" itemprop="datePublished">
          2012-06-16
      </time>
    
    
    | 
    <a href='/tag/Metasploit/'>Metasploit</a>,
    
    <a href='/tag/Armitage/'>Armitage</a>,
    
    <a href='/tag/Metasploit和armitage整合/'>Metasploit和armitage整合</a>
    
    
</span>
      <h2 class="post-title"><a href="/530.seo/">Metasploit和armitage整合教程</a></h2>
    </header>
    <section class="post-excerpt">
      <p>
      
        <p><a href="http://ha.cker.in/tag/Metasploit" target="_blank">Metasploit</a>不用过多介绍，是一个很强大的入侵工具集，但由于界面多基于命令行模式，自身UI并非那么友好，可能对部分人使用上带来一定困难。而armitage是针对metaspolit开发的一套基于java，metaspolit的扩展程序，实际是类似metaspolit的图形化，让使用上更加直观便利。    <br />下面是具体的安装步骤，使用情况待摸熟后再来介绍，如有不足和错误之处望指正heyihome.blog.51cto.com    <br />一、 准备工作    <br />1、 下载最新metasploit framework 3.5 <a href="http://www.metasploit.com/">http://www.metasploit.com/</a>    <br />2、 下载armitage <a href="http://www.fastandeasyhacking.com">http://www.fastandeasyhacking.com</a>    <br />3、 下载jar 1.6+以上版本<a href="https://cds.sun.com/is-bin/INTERSHOP.enfinity/WFS/CDS-CDS_Developer-Site/en_US/-/USD/ViewFilteredProducts-SingleVariationTypeFilter">https://cds.sun.com/is-bin/INTERSHOP.enfinity/WFS/CDS-CDS_Developer-Site/en_US/-/USD/ViewFilteredProducts-SingleVariationTypeFilter</a>    <br />本文是在windows下安装，故只按windows来说明，linux大同小异。</p>
      
      </p>
      
      <p>
          <a href="/530.seo/" class="excerpt-link">Read More...</a>
      </p>
      
    </section>
  </article>
  
  <article class="post">
    <header class="post-header">
      <span class="post-meta">
      <time datetime="2012-06-14T05:06:31.000Z" itemprop="datePublished">
          2012-06-14
      </time>
    
    
    | 
    <a href='/tag/Metasploit/'>Metasploit</a>,
    
    <a href='/tag/ssh/'>ssh</a>
    
    
</span>
      <h2 class="post-title"><a href="/527.seo/">利用metasploit的ssh模块破解ssh口令</a></h2>
    </header>
    <section class="post-excerpt">
      <p>
      
        <p><a href="http://ha.cker.in/tag/Metasploit" target="_blank">Metasploit</a>软件一般我们都是用来进行溢出什么的，在看了一个国外的一个人的blog上的关于msf的技巧，发现msf还可以进行远程ssh帐号口令的破解。    <br />Msf的ssh远程帐号口令模块默认就有，使用方法如下：    <br />Msf&gt;use auxiliary/scanner/ssh/ssh_login&#160; <br />加载ssh_login模块</p>  <p><img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="clip_image001" border="0" alt="clip_image001" src="http://img.cker.in/metasploitsshssh_1251C/clip_image001.jpg" width="781" height="466" /></p>  <p></p>
      
      </p>
      
      <p>
          <a href="/527.seo/" class="excerpt-link">Read More...</a>
      </p>
      
    </section>
  </article>
  
  <article class="post">
    <header class="post-header">
      <span class="post-meta">
      <time datetime="2012-06-13T22:52:02.000Z" itemprop="datePublished">
          2012-06-14
      </time>
    
    
    | 
    <a href='/tag/Metasploit/'>Metasploit</a>,
    
    <a href='/tag/窃听/'>窃听</a>,
    
    <a href='/tag/网络钓鱼/'>网络钓鱼</a>,
    
    <a href='/tag/keylogger/'>keylogger</a>
    
    
</span>
      <h2 class="post-title"><a href="/519.seo/">如何利用Metasploit制造一个键盘窃听网站</a></h2>
    </header>
    <section class="post-excerpt">
      <p>
      
        <p><b>大家都应该知道网络钓鱼是什么吧，那么接下来这篇文章会来讲述如何利用</b><b>Metasploit</b><b>制造一个键盘窃听网站。</b></p>  <p><b>网络钓鱼的历史：</b></p>  <p>网络钓鱼技术始于1987年，于1995年被第一次发现。</p>  <p>攻击者通过钓鱼技术获取受害者的一些信息，包括用户名、密码、信用卡细节等等。   <br />一般来说，攻击者会制造一个假冒的网站诱惑受害者进入并输入他的信息，比如仿造gmail、雅虎、facebook的登录框。</p>  <p><b>Javascript keylogger</b><b>简介：</b></p>  <p>Javascript keylogger可以捕捉通过网络的键盘击键事件。   <br />使用JavaScript keylogger的优势在于：他不需要我们预先拥有一个服务器空间，然后再上传一个假冒的网页，写伪造的页面、插链接</p>  <p><img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="clip_image001[4]" border="0" alt="clip_image001[4]" src="http://img.cker.in/Metasploit_D0E0/clip_image0014.png" width="541" height="231" /></p>  <p>再写个蛋疼的采集脚本（如下图）…<img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="clip_image002[4]" border="0" alt="clip_image002[4]" src="http://img.cker.in/Metasploit_D0E0/clip_image0024.png" width="585" height="144" /></p>  <p><b>使用</b><b>Metasploit</b><b>制造键盘窃听网站：</b></p>  <p>1. 打开msfconsle</p>  <p><img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="clip_image004[4]" border="0" alt="clip_image004[4]" src="http://img.cker.in/Metasploit_D0E0/clip_image0044.jpg" width="558" height="356" /></p>
      
      </p>
      
      <p>
          <a href="/519.seo/" class="excerpt-link">Read More...</a>
      </p>
      
    </section>
  </article>
  
  <article class="post">
    <header class="post-header">
      <span class="post-meta">
      <time datetime="2012-06-12T08:31:46.000Z" itemprop="datePublished">
          2012-06-12
      </time>
    
    
    | 
    <a href='/tag/Metasploit/'>Metasploit</a>
    
    
</span>
      <h2 class="post-title"><a href="/449.seo/">metasploit装不上</a></h2>
    </header>
    <section class="post-excerpt">
      <p>
      
        在非英文版Windows系统上安装Metasploit会出现此类错误：  —————————    Error     —————————     There has been an error.     Error running D:\T00ls\metasploit/postgresql/bin/psql.exe -U postgres -p 7337 -h localhost -c &quot;ALTER USER postgr
      
      </p>
      
      <p>
          <a href="/449.seo/" class="excerpt-link">Read More...</a>
      </p>
      
    </section>
  </article>
  
  <nav class="pagination" role="pagination">
    <a class="newer-posts" href="/tag/Metasploit/">← Newer Posts</a>
    <span class="page-number">Page 2 of 3</span>
    <a class="older-posts" href="/tag/Metasploit/page/3/">Older Posts →</a>
  </nav>
</main>


      
<footer class="site-footer">
  
  <div class="inner">
     <section class="copyright">All content copyright <a href="/">Blog of Secer</a> &copy; 2014 &bull; All rights reserved.</section>
     <section class="poweredby">Proudly published with <a class="icon-ghost" href="http://zespia.tw/hexo/">Hexo</a></section>
  </div>
</footer>

      <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

<script type="text/javascript" src="/js/jquery.fitvids.js"></script>
<script type="text/javascript" src="/js/index.js"></script>
<script type="text/javascript" src="/js/menu.js"></script>





  </div>
</div>

<nav  class="outer-nav top horizontal">

          <a class="icon-home"  href="/"><span>Home</span></a>

          <a class="icon-news"  href="/archive"><span>Archive</span></a>

          <a class="icon-image"  href="/images"><span>Images</span></a>

          <a class="icon-wiki"  href="/wiki/2014-10-28-wiki/"><span>Wiki</span></a>

          <a class="icon-Favorites"  href="/favorites"><span>Favorites</span></a>

          <a class="icon-mail"  href="/about/2014-09-11-mabao/"><span>Contact</span></a>

</nav>

</div>
</body>
</html>
