<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  <title>Tag: DNS域传送 | Blog of Secer</title>
  <meta name="description" content="" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" type="text/css" href="/css/screen.css" />
  <link rel="stylesheet" type="text/css" href="/css/style.css" />
  <meta name="generator" content="Blog of Secer">

  
  
  

  
</head>

<!--
<body class="home-template">
-->
<body class="home-template">
<div id="perspective" class="perspective effect-movedown">
  <div class="container">
    <!-- wrapper -->
    <div class="wrapper">

      <header class="site-head"  style="background: #24282b url(/img/img-bg.jpg) 0 -20%" >
    <div class="vertical">
        <div class="site-head-content inner">
             <a class="blog-logo" href="/"><img src="/img/logo.svg" alt="Blog Logo"/></a> 
            <h1 class="blog-title">Blog of Secer</h1>
            <h2 class="blog-description"><button id="showMenu">Show Menu</button></h2>
        </div>
    </div>
</header>

      
<main class="content" role="main">
  
  <article class="post">
    <header class="post-header">
      <span class="post-meta">
      <time datetime="2012-09-24T21:41:21.000Z" itemprop="datePublished">
          2012-09-25
      </time>
    
    
    | 
    <a href='/tag/DNS域传送/'>DNS域传送</a>
    
    
</span>
      <h2 class="post-title"><a href="/849.seo/">爱拍DNS域传送漏洞</a></h2>
    </header>
    <section class="post-excerpt">
      <p>
      
        关于DNS域传送漏洞 ：DNS域传送泄露漏洞详解  &#160;  爱拍DNS域传送漏洞演示：    &#160;  nslookup命令：  &gt; server 8.8.8.8  (root) nameserver = E.ROOT-SERVERS.NET  (root) nameserver = F.ROOT-SERVERS.NET  (root) nameserver = G.ROOT-SERVERS.NET  (root) 
      
      </p>
      
      <p>
          <a href="/849.seo/" class="excerpt-link">Read More...</a>
      </p>
      
    </section>
  </article>
  
  <article class="post">
    <header class="post-header">
      <span class="post-meta">
      <time datetime="2012-09-24T21:38:33.000Z" itemprop="datePublished">
          2012-09-25
      </time>
    
    
    | 
    <a href='/tag/漏洞/'>漏洞</a>,
    
    <a href='/tag/DNS域传送/'>DNS域传送</a>
    
    
</span>
      <h2 class="post-title"><a href="/847.seo/">DNS域传送泄露漏洞详解</a></h2>
    </header>
    <section class="post-excerpt">
      <p>
      
        <p>区域传送操作指的是一台后备服务器使用来自主服务器的数据刷新自己的zone数据库。这为运行中的DNS服务提供了一定的冗余度，其目的是为了防止主域名服务器因意外故障变得不可用时影响到全局。一般来说，DNS区域传送操作只在网络里真的有后备域名DNS服务器时才有必要执行，但许多DNS服务器却被错误地配置成只要有人发出请求，就会向对方提供一个zone数据库的拷贝。如果所提供的信息只是与连到因特网上且具备有效主机名的系统相关，那么这种错误配置不一定是坏事，尽管这使得攻击者发现潜在目标要容易得多。真正的问题发生在一个单位没有使用公用/私用DNS机制来分割外部公用DNS信息和内部私用DNS信息的时候，此时内部主机名和IP地址都暴露给了攻击者。把内部IP地址信息提供给因特网上不受信任的用户，就像是把一个单位的内部网络完整蓝图或导航图奉送给了别人。   <br />系统管理员来说，允许不受信任的因特网用户执行DNS区域传送（zone transfer）操作是后果最为严重的错误配置之一。 </p>  <p>Nslookup显示可用来诊断域名系统(DNS) 基础结构的信息。只有在已安装TCP/IP 协议的情况下才可以使用Nslookup 命令行工具。   <br />语法    <br />nslookup [-SubCommand …] [{ComputerToFind| [-Server]}]    <br />参数    <br />-SubCommand …    <br />将一个或多个nslookup 子命令指定为命令行选项。    <br />ComputerToFind    <br />如果未指定其它服务器，就使用当前默认DNS 名称服务器查阅ComputerToFind 的信息。要查找不在当前DNS 域的计算机，请在名称上附加句点。    <br />-Server    <br />指定将该服务器作为DNS 名称服务器使用。如果省略了-Server，将使用默认的DNS 名称服务器。    <br />{help|?}    <br />显示nslookup 子命令的简短总结。    <br />注释    <br />如果ComputerToFind 是IP 地址，并且查询类型为A 或PTR 资源记录类型，则返回计算机的名称。如果ComputerToFind 是一个名称，并且没有跟踪期，则向该名称添加默认DNS 域名。此行为取决于下面set 子命令的状态：domain、srchlist、defname 和search。    <br />如果键入连字符(-) 代替ComputerToFind，命令提示符更改为nslookup 交互式模式。    <br />命令行长度必须少于256 个字符。    <br />Nslookup 有两种模式：交互式和非交互式。    <br />如果仅需要查找一块数据，请使用非交互式模式。对于第一个参数，键入要查找的计算机的名称或IP 地址。对于第二个参数，键入DNS 名称服务器的名称或IP 地址。如果省略第二个参数，nslookup 使用默认DNS 名称服务器。    <br />如果需要查找多块数据，可以使用交互式模式。为第一个参数键入连字符(-)，为第二个参数键入DNS 名称服务器的名称或IP 地址。或者，省略两个参数，则nslookup 使用默认DNS 名称服务器。下面是一些有关在交互式模式下工作的提示：    <br />要随时中断交互式命令，请按CTRL+C。    <br />要退出，请键入exit。    <br />要将内置命令当作计算机名，请在该命令前面放置转义字符()。    <br />将无法识别的命令解释为计算机名。    <br />如果查找请求失败，nslookup 将打印错误消息。下表列出可能的错误消息。    <br />错误消息 说明    <br />Timed out 重试一定时间和一定次数之后，服务器没有响应请求。可以通过set timeout 子命令设置超时期。而利用set retry 子命令设置重试次数。    <br />No response from server 服务器上没有运行DNS 名称服务器。    <br />No records 尽管计算机名有效，但是DNS 名称服务器没有计算机当前查询类型的资源记录。查询类型使用set querytype 命令指定。    <br />Nonexistent domain 计算机或DNS 域名不存在。    <br />Connection refused    <br />or    <br />Network is unreachable    <br />无法与DNS 名称服务器或指针服务器建立连接。该错误通常发生在ls 和finger 请求中。    <br />Server failure DNS 名称服务器发现在其数据库中内部不一致而无法返回有效应答。    <br />Refused DNS 名称服务器拒绝为请求服务。    <br />Format error DNS 名称服务器发现请求数据包的格式不正确。可能表明nslookup 中存在错误。    <br />nslookup –qt=类型 目标域名    <br /> 注意qt必须小写。    <br /> 类型可以是一下字符，不区分大小写：    <br /> A 地址记录(Ipv4)    <br /> AAAA 地址记录（Ipv6）    <br /> AFSDB Andrew文件系统数据库服务器记录（不懂）    <br /> ATMA ATM地址记录（不是自动提款机）    <br /> CNAME 别名记录    <br /> HINFO 硬件配置记录，包括CPU、操作系统信息    <br /> ISDN 域名对应的ISDN号码    <br /> MB 存放指定邮箱的服务器    <br /> MG 邮件组记录    <br /> MINFO 邮件组和邮箱的信息记录    <br /> MR 改名的邮箱记录    <br /> MX 邮件服务器记录    <br /> NS 名字服务器记录    <br /> PTR 反向记录（从IP地址解释域名）    <br /> RP 负责人记录    <br /> RT 路由穿透记录（不懂）    <br /> SRV TCP服务器信息记录（将有大用处）    <br /> TXT 域名对应的文本信息    <br /> X25 域名对应的X.25地址记录</p>  <p>   <br />范例    <br />每个命令行选项均由连字符(-) 后紧跟命令名组成，有时是等号(=) 后跟一个数值。例如，要将默认的查询类型更改为主机（计算机）信息，并将初始超时更改为10 秒，请键入：    <br />nslookup -querytype=hinfo -timeout=10    <br />Nslookup.exe 可以在两种模式下运行：交互式和非交互式。当需要返回单块数据时，请使用非交互式模式。非交互模式的语法如下：    <br />nslookup [-option] [hostname] [server]    <br />要在交互模式下启动Nslookup.exe，只需在命令提示符下输入nslookup：    <br />C:\&gt; nslookup    <br />Default Server: nameserver1.domain.com    <br />Address: 10.0.0.1    <br />&gt;    <br />在命令提示符下输入help 或? 将生成可用的命令列表。在命令提示符下输入的任何内容，如果它不是有效命令，则假设它是主机名，尝试使用默认服务器来解析它。要中断交互命令，请按CTRL+C。要退出交互模式并返回到命令提示符下，并在命令提示符下输入exit。    <br />以下是帮助输出，其中包含选项的完整列表：    <br />Commands: (identifiers are shown in uppercase, [] means optional)    <br />NAME - print info about the host/domain NAME using default    <br />server www.2cto.com    <br />NAME1 NAME2 - as above, but use NAME2 as server    <br />help or ? - print info on common commands    <br />set OPTION - set an option    <br />all - print options, current server and host    <br />[no]debug - print debugging information    <br />[no]d2 - print exhaustive debugging information    <br />[no]defname - append domain name to each query    <br />[no]recurse - ask for recursive answer to query    <br />[no]search - use domain search list    <br />[no]vc - always use a virtual circuit    <br />domain=NAME - set default domain name to NAME    <br />srchlist=N1[/N2/…/N6] - set domain to N1 and search list to N1, N2,    <br />and so on    <br />root=NAME - set root server to NAME    <br />retry=X - set number of retries to X    <br />timeout=X - set initial time-out interval to X seconds    <br />type=X - set query type (for example, A, ANY, CNAME, MX,    <br />NS, PTR, SOA, SRV)    <br />querytype=X - same as type    <br />class=X - set query class (for example, IN (Internet), ANY)    <br />[no]msxfr - use MS fast zone transfer    <br />ixfrver=X - current version to use in IXFR transfer request    <br />server NAME - set default server to NAME, using current default server    <br />lserver NAME - set default server to NAME, using initial server    <br />finger [USER] - finger the optional NAME at the current default host    <br />root - set current default server to the root    <br />ls [opt] DOMAIN [&gt; FILE] - list addresses in DOMAIN (optional: output to    <br />FILE)    <br />-a - list canonical names and aliases    <br />-d - list all records    <br />-t TYPE - list records of the given type (for example, A, CNAME,    <br />MX, NS, PTR, and so on)    <br />view FILE - sort an ‘ls’ output file and view it with pg    <br />exit - exit the program    <br />通过在命令提示符下运行set 命令，可以在Nslookup.exe 中设置许多不同的选项。要得到这些选项的完整列表，只需输入set all。请参见以上内容，在set 命令下，得到可用选项的打印输出。    <br />查找不同的数据类型    <br />要在域名空间中查找不同的数据类型，请在命令提示符下使用set type 或set q[uerytype] 命令。例如，要查询邮件交换器数据，请输入：    <br />C:\&gt; nslookup    <br />Default Server: ns1.domain.com    <br />Address: 10.0.0.1    <br />&gt; set q=mx    <br />&gt; mailhost    <br />Server: ns1.domain.com    <br />Address: 10.0.0.1    <br />mailhost.domain.com MX preference = 0, mail exchanger =    <br />mailhost.domain.com    <br />mailhost.domain.com internet address = 10.0.0.5    <br />&gt;    <br />第一次查询是查找远程名称，答案是权威的，但随后的查询是非权威的。第一次查询远程主机时，本地DNS 服务器与作为该域权威的DNS 服务器取得联系。然后，本地DNS 服务器缓存该信息，以便从本地服务器缓存中非权威地回答随后的查询。    <br />直接从另一个名称服务器中进行查询    <br />要直接查询另一个名称服务器，请使用server 或lserver 命令切换到该名称服务器。lserver 命令使用本地服务器得到要切换的服务器地址，而server 命令使用当前默认服务器得到该地址。    <br />例如：    <br />C:\&gt; nslookup    <br />Default Server: nameserver1.domain.com    <br />Address: 10.0.0.1    <br />&gt; server 10.0.0.2    <br />Default Server: nameserver2.domain.com    <br />Address: 10.0.0.2    <br />&gt;</p>  <p>&#160;</p>
      
      </p>
      
      <p>
          <a href="/847.seo/" class="excerpt-link">Read More...</a>
      </p>
      
    </section>
  </article>
  
  <nav class="pagination" role="pagination">
    
    <span class="page-number">Page 1 of 1</span>
    
  </nav>
</main>


      
<footer class="site-footer">
  
  <div class="inner">
     <section class="copyright">All content copyright <a href="/">Blog of Secer</a> &copy; 2014 &bull; All rights reserved.</section>
     <section class="poweredby">Proudly published with <a class="icon-ghost" href="http://zespia.tw/hexo/">Hexo</a></section>
  </div>
</footer>

      <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

<script type="text/javascript" src="/js/jquery.fitvids.js"></script>
<script type="text/javascript" src="/js/index.js"></script>
<script type="text/javascript" src="/js/menu.js"></script>





  </div>
</div>

<nav  class="outer-nav top horizontal">

          <a class="icon-home"  href="/"><span>Home</span></a>

          <a class="icon-news"  href="/archives"><span>Archive</span></a>

          <a class="icon-image"  href="/images"><span>Images</span></a>

          <a class="icon-wiki"  href="/wiki/"><span>Wiki</span></a>

          <a class="icon-Favorites"  href="/favorites"><span>Favorites</span></a>

          <a class="icon-mail"  href="/about/"><span>Contact</span></a>

</nav>

</div>
</body>
</html>
