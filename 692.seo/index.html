<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  <title>Wordpress博客搬家 （新手教程） | Blog of Secer</title>
  <meta name="description" content="" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" type="text/css" href="/css/screen.css" />
  <link rel="stylesheet" type="text/css" href="/css/style.css" />
  <meta name="generator" content="Blog of Secer">

  
  
  

  
</head>

<!--
<body class="post-template">
-->
<body class="home-template">
<div id="perspective" class="perspective effect-movedown">
  <div class="container">
    <!-- wrapper -->
    <div class="wrapper">

      <header class="site-head"  style="background: #24282b url(/img/img-bg.jpg) 0 -20%" >
    <div class="vertical">
        <div class="site-head-content inner">
             <a class="blog-logo" href="/"><img src="/img/logo.svg" alt="Blog Logo"/></a> 
            <h1 class="blog-title">Blog of Secer</h1>
            <h2 class="blog-description"><button id="showMenu">Show Menu</button></h2>
        </div>
    </div>
</header>

      

<main class="content" role="main">
  <article class="post">
    <span class="post-meta">
      <time datetime="2012-07-12T22:45:54.000Z" itemprop="datePublished">
          2012-07-13
      </time>
    
    
    | 
    <a href='/tag/Wordpress博客搬家/'>Wordpress博客搬家</a>
    
    
</span>
    <h1 class="post-title">Wordpress博客搬家 （新手教程）</h1>
    <section class="post-content">
      <p><a href="http://ha.cker.in/tag/Wordpress博客搬家" target="_blank">Wordpress博客搬家</a>，过程记录下：</p>  <p>本来是在VPSA[假设IP: 5.5.5.5]上的，现在挂到VPSB[假设IP: 74.63.209.153]上了，</p>  <p><em>1.Web文件同步</em></p>  <p>VPSA现在的web目录是/var/<a href="http://ha.cker.in" target="_blank">3389</a>.eu/，VPSB目标web目录是/var/ha.cker.in/web/，</p>  <p>首先Linux同步命令将VPSA的Wordpress博客的文件图片等同步到VPSB的相应目录去：</p>  <p><strong>rsync -vzrtopg –progress –exclude-from=/var/</strong><a href="http://ha.cker.in" target="_blank"><strong>3389</strong></a><strong>.eu/wp-content/cache/ /var/</strong><a href="http://ha.cker.in" target="_blank"><strong>3389</strong></a><strong>.eu/ -e ssh </strong><a href="mailto:www@:/var/ha.cker.in/web/" target="_blank" rel="external"><strong>www@74.63.209.153:/var/ha.cker.in/web/</strong></a></p>  <p>其中这句：–exclude-from=/var/<a href="http://ha.cker.in" target="_blank">3389</a>.eu/wp-content/cache/ 是排除掉cache目录，因为里面缓存文件太多了就不同步过去了；<a href="mailto:www@:/var/ha.cker.in/web/" target="_blank" rel="external">www@74.63.209.153:/var/ha.cker.in/web/</a>这一句是我们将借住VPSB上的用户www完成文件传输操作，然后是VPSB的IP+冒号+目标Web目录。输完命令回车输入www的密码即开始同步。</p>  <p><em>2.数据库备份</em></p>  <p>登录phpmyadmin导出博客数据，自己拖自己的库- -，苦逼啊。。选中自己的数据库：</p>  <p><a href="http://img.cker.in/Wordpress_CF37/image.png" target="_blank"><img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="image" border="0" alt="image" src="http://img.cker.in/Wordpress_CF37/image_thumb.png" width="554" height="75"></a> </p><a id="more"></a><p><a href="http://img.cker.in/Wordpress_CF37/image_3.png" target="_blank"><img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="image" border="0" alt="image" src="http://img.cker.in/Wordpress_CF37/image_thumb_3.png" width="956" height="643"></a> </p>  <p>下载100%后数据库就备份完毕了</p>  <p><em>3.域名解析修改</em></p>  <p>数据都搬走了，域名的解析当然也要跟着变指向了~我用的是某DNS解析服务商提供的免费DNS解析服务，如图</p>  <p><a href="http://img.cker.in/Wordpress_CF37/image_4.png" target="_blank"><img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="image" border="0" alt="image" src="http://img.cker.in/Wordpress_CF37/image_thumb_4.png" width="910" height="91"></a> </p>  <p>点管理操作下面的【解析】来到解析修改页</p>  <p><a href="http://img.cker.in/Wordpress_CF37/image_5.png" target="_blank"><img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="image" border="0" alt="image" src="http://img.cker.in/Wordpress_CF37/image_thumb_5.png" width="897" height="135"></a> </p>  <p>然后给VPSB里的web服务器软件添加绑定我们的域名，nginx添加绑定域名应该都会的吧，我还是截图比较方便：</p>  <blockquote>   <p>cd;./vhost.sh #lnmp绑定域名脚本，红框里是我输入的信息</p> </blockquote>  <p></p>  <p></p>  <p></p>  <p><a href="http://img.cker.in/Wordpress_CF37/image_6.png" target="_blank"><img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="image" border="0" alt="image" src="http://img.cker.in/Wordpress_CF37/image_thumb_6.png" width="668" height="341"></a> </p>  <p><a href="http://img.cker.in/Wordpress_CF37/image_7.png" target="_blank"><img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="image" border="0" alt="image" src="http://img.cker.in/Wordpress_CF37/image_thumb_7.png" width="609" height="531"></a> </p>  <p>到这后按任意键就完成了域名的绑定了，然后修改wordpress的nginx重写规则文件去：</p>  <blockquote>   <p>vi /usr/local/nginx/conf/wordpress.conf</p>    <p>location /     <br>{      <br>try_files $uri $uri/ /index.php?q=$uri&amp;$args;      <br>}</p> </blockquote>  <p>只有这么一句就搞定了……</p>  <p>平滑重启nginx</p>  <blockquote>   <p>kill -HUP <code>cat /usr/local/nginx/logs/nginx.pid</code> #路径不一样的要修改</p> </blockquote>  <p></p>  <p><em>4.数据库导入</em></p>  <p>数据导入呢就登录VPSA的phpmyadmin新建一个数据库和用户，然后导入第2步中备份的SQL文件，就不多说啦。</p>  <p><em>5.Wordpress配置文件修改</em></p>  <p>修改Wordpress的wp-config.php文件的DB_NAME、DB_USER和DB_PASSWORD等信息：</p>  <p><a href="http://img.cker.in/Wordpress_CF37/image_8.png" target="_blank"><img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="image" border="0" alt="image" src="http://img.cker.in/Wordpress_CF37/image_thumb_8.png" width="464" height="348"></a> </p>  <p>基本无大碍。</p>  <p>没看懂的可以问我我会帮你的，如果有空，哈哈。</p>
    </section>
    <footer class="post-footer">
      <section class="author">
    <h4>Secer</h4>
    <p>记录互联网安全历程与个人成长经历</p>
</section>
      <section class="share">
    <h4>Share this post</h4>
    <a class="icon-sina-weibo" href="http://v.t.sina.com.cn/share/share.php?title=记录互联网安全历程与个人成长经历 ?url=http://www.cker.in/692.seo/" target="_blank">
        <span class="hidden">weibo</span>
    </a>
    <a class="icon-twitter" href="http://twitter.com/share?url=http://www.cker.in/692.seo/"
       onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
        <span class="hidden">Twitter</span>
    </a>
    <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://www.cker.in/692.seo/"
       onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
        <span class="hidden">Facebook</span>
    </a>
    <a class="icon-google-plus" href="https://plus.google.com/share?url=http://www.cker.in/692.seo/"
       onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
        <span class="hidden">Google+</span>
    </a>
</section>

    </footer>
  </article>
  <nav class="pagination" role="pagination">
    
    <a class="newer-posts" href="/699.seo/">
        ← Nginx编译选项
    </a>
    
    <span class="icon-logo">•</span>
    
    <a class="older-posts" href="/689.seo/">
        移动网络垃圾，喊价便宜千万别用 →
    </a>
    
</nav>

  <div id="comment" class="comments-area">
    <h4 class="title"><a href="#disqus_comments" name="disqus_comments">Comments</a></h4>
    
</div>

</main>


      
<footer class="site-footer">
  
  <div class="inner">
     <section class="copyright">All content copyright <a href="/">Blog of Secer</a> &copy; 2014 &bull; All rights reserved.</section>
     <section class="poweredby">Proudly published with <a class="icon-ghost" href="http://zespia.tw/hexo/">Hexo</a></section>
  </div>
</footer>

      <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

<script type="text/javascript" src="/js/jquery.fitvids.js"></script>
<script type="text/javascript" src="/js/index.js"></script>
<script type="text/javascript" src="/js/menu.js"></script>





  </div>
</div>

<nav  class="outer-nav top horizontal">

          <a class="icon-home"  href="/"><span>Home</span></a>

          <a class="icon-news"  href="/archive"><span>Archive</span></a>

          <a class="icon-image"  href="/images"><span>Images</span></a>

          <a class="icon-wiki"  href="/wiki/2014-10-28-wiki/"><span>Wiki</span></a>

          <a class="icon-Favorites"  href="/favorites"><span>Favorites</span></a>

          <a class="icon-mail"  href="/about/2014-09-11-mabao/"><span>Contact</span></a>

</nav>

</div>
</body>
</html>
