<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  <title>DNS安装 | Blog of Secer</title>
  <meta name="description" content="" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" type="text/css" href="/css/screen.css" />
  <link rel="stylesheet" type="text/css" href="/css/style.css" />
  <meta name="generator" content="Blog of Secer">

  
  
  

  
</head>

<!--
<body class="post-template">
-->
<body class="home-template">
<div id="perspective" class="perspective effect-movedown">
  <div class="container">
    <!-- wrapper -->
    <div class="wrapper">

      <header class="site-head"  style="background: #24282b url(/img/img-bg.jpg) 0 -20%" >
    <div class="vertical">
        <div class="site-head-content inner">
             <a class="blog-logo" href="/"><img src="/img/logo.svg" alt="Blog Logo"/></a> 
            <h1 class="blog-title">Blog of Secer</h1>
            <h2 class="blog-description"><button id="showMenu">Show Menu</button></h2>
        </div>
    </div>
</header>

      

<main class="content" role="main">
  <article class="post">
    <span class="post-meta">
      <time datetime="2011-07-12T18:50:28.000Z" itemprop="datePublished">
          2011-07-13
      </time>
    
    
    | 
    <a href='/tag/Linux/'>Linux</a>,
    
    <a href='/tag/DNS/'>DNS</a>
    
    
</span>
    <h1 class="post-title">DNS安装</h1>
    <section class="post-content">
      <p></p><p>以下记录仅作参考 </p><p>我是安postfix，所以先删除自带的邮件发送程序 <blockquote> <p>rpm -e sendmail –nodeps&nbsp;&nbsp;&nbsp; </p></blockquote> </p><p>或者 <blockquote> <p>yum remove sendmail </p></blockquote> </p><p>用yum安装需要的包</p> <blockquote> <p>yum install bind bind-utils bind-chroot</p></blockquote> <blockquote> <p><br>hostname tl.com</p></blockquote> <p>然后</p> <blockquote> <p>vi /etc/resolv.conf</p></blockquote> <p>将DNS设为自己的IP</p> <p>在/var/named/chroot目录下面<br>&nbsp;&nbsp;&nbsp; 主配置文件<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /etc/named.conf<br>&nbsp;&nbsp;&nbsp; 区配置文件<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /var/named<br>&nbsp;&nbsp;&nbsp; 区文件<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; named.root<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; named.local<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; localhost.zone </p> <p><strong>/etc/named.conf文件<br></strong></p><pre class="csharpcode">options<br>{    directory “/var/named”;<br>    dump-file “/var/named/data_cache_dump.db”;<br>    statistics-file “/var/named/data/named_stats.txt”;<br>    pid-file “/var/run/named/named.pid”;<br>    Forwarders{202.101.172.35;202.101.172.47;};<br>    allow-query{any;};<br>    allow-transfer{none;};<br>}; <p></p>
<p>include “/etc/rndc.key”; </p>
<p>Zone “.”<br>{<br>    type hint;<br>    file “named.root”;<br>}; </p>
<p>Zone “localhost”<br>{<br>    type master;<br>    file “named.localhost”;<br>}; </p>
<p>Zone “0.0.127.in-addr.arpa”<br>{<br>    type master;<br>    file “named.127.0.0”;<br>}; </p>
<p>Zone “tl.com”<br>{<br>    type master;<br>    file “named.tl.com”;<br>}; </p>
<p>Zone “128.168.192.in-addr.arpa”<br>{<br>    type master;<br>    file “named.192.168.128”;<br>}; </p>
<p></p></pre><p></p>
<style type="text/css">.csharpcode, .csharpcode pre
{
    font-size: small;
    color: black;
    font-family: consolas, "Courier New", courier, monospace;
    background-color: #ffffff;
    /*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
    background-color: #f4f4f4;
    width: 100%;
    margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>

<p></p><p>&nbsp;&nbsp;&nbsp; 编辑/var/named/named.root&nbsp;&nbsp;&nbsp; 文件,并更改所有者</p>
<blockquote><br><p>chown named:named named.root </p></blockquote><pre class="csharpcode">.        3600000    IN    NS    A.ROOT-SERVERS.NET.<br>A.ROOT-SERVERS.NET    .3600000    A    198.41.0.4 </pre><br><p>&nbsp;</p><br><p>编辑/var/named/named.localhost&nbsp;&nbsp;&nbsp; 文件<br></p><pre class="csharpcode">;主机相关的设置<br>$TTL    600<br><br>;关于Master/Slave的授权内容<br>@    IN    SOA    tl.com.    mail.tl.com.(<br>20110711001    28800    14400    720000    86400 )<br><br>;这里的DNS服务器的主机名称与IP对应<br>@    IN    NS    localhost.<br>localhost.    IN    A    127.0.0.1<br><br>;其他记录加入下面<br></pre><br><style type="text/css">.csharpcode, .csharpcode pre<br>{<br>    font-size: small;<br>    color: black;<br>    font-family: consolas, “Courier New”, courier, monospace;<br>    background-color: #ffffff;<br>    /<em>white-space: pre;</em>/<br>}<br>.csharpcode pre { margin: 0em; }<br>.csharpcode .rem { color: #008000; }<br>.csharpcode .kwrd { color: #0000ff; }<br>.csharpcode .str { color: #006080; }<br>.csharpcode .op { color: #0000c0; }<br>.csharpcode .preproc { color: #cc6633; }<br>.csharpcode .asp { background-color: #ffff00; }<br>.csharpcode .html { color: #800000; }<br>.csharpcode .attr { color: #ff0000; }<br>.csharpcode .alt<br>{<br>    background-color: #f4f4f4;<br>    width: 100%;<br>    margin: 0em;<br>}<br>.csharpcode .lnum { color: #606060; }<br></style><br><br><p> 编辑/var/named/named.127.0.0&nbsp;&nbsp;&nbsp; 文件<br></p><pre class="csharpcode">$TTL    600<br>@    IN    SOA    tl.com.    root.tl.com.    (20110711002    28800    14400    720000    86400)<br>;本领域的DNS服务器的主机名称与IP的对应<br>@    IN    NS    localhost.<br>1    IN    PTR    localhost. </pre><br><style type="text/css">.csharpcode, .csharpcode pre<br>{<br>    font-size: small;<br>    color: black;<br>    font-family: consolas, “Courier New”, courier, monospace;<br>    background-color: #ffffff;<br>    /<em>white-space: pre;</em>/<br>}<br>.csharpcode pre { margin: 0em; }<br>.csharpcode .rem { color: #008000; }<br>.csharpcode .kwrd { color: #0000ff; }<br>.csharpcode .str { color: #006080; }<br>.csharpcode .op { color: #0000c0; }<br>.csharpcode .preproc { color: #cc6633; }<br>.csharpcode .asp { background-color: #ffff00; }<br>.csharpcode .html { color: #800000; }<br>.csharpcode .attr { color: #ff0000; }<br>.csharpcode .alt<br>{<br>    background-color: #f4f4f4;<br>    width: 100%;<br>    margin: 0em;<br>}<br>.csharpcode .lnum { color: #606060; }<br></style><br><br><p>&nbsp; <strong>编辑/var/named/named.tl.com&nbsp;&nbsp;&nbsp; 文件</strong></p><pre class="csharpcode">$TTL    600<br>@    IN    SOA    mail.tl.com.    root.mail    (20010711004    28800    14400    720000    86400)<br>;本领域内的DNS服务器的主机名称要与IP相对应<br>@    IN    NS    mail.tl.com.<br>www    IN    A    192.168.128.133<br>mail    IN    A    192.168.128.133<br>@    IN    MX    10    mail<br><br>;其他记录添加的地方<br>ftp    IN    CNAME    www<br>forum    IN    CNAME    www<br>test    IN    A    192.168.128.133<br><br></pre><br><p><strong>编辑/var/named/named.192.168.128&nbsp;&nbsp;&nbsp; 文件<br></strong></p><pre class="csharpcode">$TTL    600<br>@    IN    SOA    mail.tl.com.    root.tl.com.    (20110711003    28800    14400    720000    86400)<br>;本领域内的DNS服务器的主机名称与IP对应<br>@    IN    NS    mail.tl.com.<br>133    IN    PTR    mail.tl.com.<br>133    IN    PTR    tl.com.<br><br>;其他记录可以加入的地方<br>132    IN    PTR    win.tl.com.<br><br></pre><br><style type="text/css">.csharpcode, .csharpcode pre<br>{<br>    font-size: small;<br>    color: black;<br>    font-family: consolas, “Courier New”, courier, monospace;<br>    background-color: #ffffff;<br>    /<em>white-space: pre;</em>/<br>}<br>.csharpcode pre { margin: 0em; }<br>.csharpcode .rem { color: #008000; }<br>.csharpcode .kwrd { color: #0000ff; }<br>.csharpcode .str { color: #006080; }<br>.csharpcode .op { color: #0000c0; }<br>.csharpcode .preproc { color: #cc6633; }<br>.csharpcode .asp { background-color: #ffff00; }<br>.csharpcode .html { color: #800000; }<br>.csharpcode .attr { color: #ff0000; }<br>.csharpcode .alt<br>{<br>    background-color: #f4f4f4;<br>    width: 100%;<br>    margin: 0em;<br>}<br>.csharpcode .lnum { color: #606060; }<br></style><br><br><p>然后重启域名服务</p><br><blockquote><br><p>service named restart</p></blockquote><br><p><font color="#400000" size="4" face="宋体">若启动不成功删除配置文件中的注释</font>。 </p><br><p>若绑定同一局域网其他的域名<br>复制named.tl.com为named.OtherDomain.com，修改里面的记录<br>并且修改反向记录文件named.192.168.128<br>修改named.conf增加如下记录<br></p><pre class="csharpcode">Zone <span class="str">“test.com”</span><br>{<br>    type master;<br>    file <span class="str">“named.test.com”</span>;<br>}; </pre><br><style type="text/css">.csharpcode, .csharpcode pre<br>{<br>    font-size: small;<br>    color: black;<br>    font-family: consolas, “Courier New”, courier, monospace;<br>    background-color: #ffffff;<br>    /<em>white-space: pre;</em>/<br>}<br>.csharpcode pre { margin: 0em; }<br>.csharpcode .rem { color: #008000; }<br>.csharpcode .kwrd { color: #0000ff; }<br>.csharpcode .str { color: #006080; }<br>.csharpcode .op { color: #0000c0; }<br>.csharpcode .preproc { color: #cc6633; }<br>.csharpcode .asp { background-color: #ffff00; }<br>.csharpcode .html { color: #800000; }<br>.csharpcode .attr { color: #ff0000; }<br>.csharpcode .alt<br>{<br>    background-color: #f4f4f4;<br>    width: 100%;<br>    margin: 0em;<br>}<br>.csharpcode .lnum { color: #606060; }<br></style><br><br><p>最后自启动<br><blockquote><br><p>chkconfig named on </p></blockquote></p>
    </section>
    <footer class="post-footer">
      <section class="author">
    <h4>Secer</h4>
    <p>记录互联网安全历程与个人成长经历</p>
</section>
      <section class="share">
    <h4>Share this post</h4>
    <a class="icon-sina-weibo" href="http://v.t.sina.com.cn/share/share.php?title=记录互联网安全历程与个人成长经历 ?url=http://www.cker.in/42.seo/" target="_blank">
        <span class="hidden">weibo</span>
    </a>
    <a class="icon-twitter" href="http://twitter.com/share?url=http://www.cker.in/42.seo/"
       onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
        <span class="hidden">Twitter</span>
    </a>
    <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://www.cker.in/42.seo/"
       onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
        <span class="hidden">Facebook</span>
    </a>
    <a class="icon-google-plus" href="https://plus.google.com/share?url=http://www.cker.in/42.seo/"
       onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
        <span class="hidden">Google+</span>
    </a>
</section>

    </footer>
  </article>
  <nav class="pagination" role="pagination">
    
    <a class="newer-posts" href="/43.seo/">
        ← 键盘上的符号英文怎么读
    </a>
    
    <span class="icon-logo">•</span>
    
    <a class="older-posts" href="/41.seo/">
        mysql中Table is read only的解决 →
    </a>
    
</nav>

  <div id="comment" class="comments-area">
    <h4 class="title"><a href="#disqus_comments" name="disqus_comments">Comments</a></h4>
    
</div>

</main>


      
<footer class="site-footer">
  
  <div class="inner">
     <section class="copyright">All content copyright <a href="/">Blog of Secer</a> &copy; 2014 &bull; All rights reserved.</section>
     <section class="poweredby">Proudly published with <a class="icon-ghost" href="http://zespia.tw/hexo/">Hexo</a></section>
  </div>
</footer>

      <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

<script type="text/javascript" src="/js/jquery.fitvids.js"></script>
<script type="text/javascript" src="/js/index.js"></script>
<script type="text/javascript" src="/js/menu.js"></script>





  </div>
</div>

<nav  class="outer-nav top horizontal">

          <a class="icon-home"  href="/"><span>Home</span></a>

          <a class="icon-news"  href="/archive"><span>Archive</span></a>

          <a class="icon-image"  href="/images"><span>Images</span></a>

          <a class="icon-wiki"  href="/wiki/2014-10-28-wiki/"><span>Wiki</span></a>

          <a class="icon-Favorites"  href="/favorites"><span>Favorites</span></a>

          <a class="icon-mail"  href="/about/2014-09-11-mabao/"><span>Contact</span></a>

</nav>

</div>
</body>
</html>
